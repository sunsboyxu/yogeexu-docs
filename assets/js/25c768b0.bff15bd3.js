"use strict";(self.webpackChunkyogeexu_docs=self.webpackChunkyogeexu_docs||[]).push([[8308],{3905:(e,n,r)=>{r.d(n,{Zo:()=>i,kt:()=>d});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?l(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function u(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},l=Object.keys(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=t.createContext({}),p=function(e){var n=t.useContext(o),r=n;return e&&(r="function"==typeof e?e(n):s(s({},n),e)),r},i=function(e){var n=p(e.components);return t.createElement(o.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},v=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,l=e.originalType,o=e.parentName,i=u(e,["components","mdxType","originalType","parentName"]),v=p(r),d=a,m=v["".concat(o,".").concat(d)]||v[d]||c[d]||l;return r?t.createElement(m,s(s({ref:n},i),{},{components:r})):t.createElement(m,s({ref:n},i))}));function d(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=r.length,s=new Array(l);s[0]=v;var u={};for(var o in n)hasOwnProperty.call(n,o)&&(u[o]=n[o]);u.originalType=e,u.mdxType="string"==typeof e?e:a,s[1]=u;for(var p=2;p<l;p++)s[p]=r[p];return t.createElement.apply(null,s)}return t.createElement.apply(null,r)}v.displayName="MDXCreateElement"},8465:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>c,frontMatter:()=>l,metadata:()=>u,toc:()=>p});var t=r(7462),a=(r(7294),r(3905));const l={},s="vueSSR",u={unversionedId:"webs/vue/vuessr/vue2-ssr",id:"webs/vue/vuessr/vue2-ssr",title:"vueSSR",description:"- Vue.js \u670d\u52a1\u5668\u7aef\u6e32\u67d3\u6307\u5357",source:"@site/docs/webs/vue/vuessr/vue2-ssr.md",sourceDirName:"webs/vue/vuessr",slug:"/webs/vue/vuessr/vue2-ssr",permalink:"/yogeexu-docs/webs/vue/vuessr/vue2-ssr",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"myAutogeneratedSidebar",previous:{title:"nuxtjs",permalink:"/yogeexu-docs/webs/vue/vuessr/nuxtjs"},next:{title:"React",permalink:"/yogeexu-docs/webs/react/React"}},o={},p=[{value:"\u5355\u2eda\u5e94\u2f64SPA \u4f18\u70b9",id:"\u5355\u5e94spa-\u4f18\u70b9",level:2},{value:"\u5355\u2eda\u5e94\u2f64SPA \u7f3a\u70b9",id:"\u5355\u5e94spa-\u7f3a\u70b9",level:3},{value:"\u4ec0\u4e48\u662f\u670d\u52a1\u5668\u7aef\u6e32\u67d3SSR",id:"\u4ec0\u4e48\u662f\u670d\u52a1\u5668\u7aef\u6e32\u67d3ssr",level:2},{value:"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e32\u67d3",id:"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e32\u67d3",level:2},{value:"\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u70b9\u53bb\u7406\u89e3 vueSSR",id:"\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u70b9\u53bb\u7406\u89e3-vuessr",level:2},{value:"\u4f7f\u7528 vueSSR \u7248\u672c\u8981\u6c42",id:"\u4f7f\u7528-vuessr-\u7248\u672c\u8981\u6c42",level:2},{value:"\u5f53\u524d\u57fa\u4e8e vue-cli @vue/cli 5.0.1 \u5f00\u53d1\u6d4b\u8bd5",id:"\u5f53\u524d\u57fa\u4e8e-vue-cli-vuecli-501-\u5f00\u53d1\u6d4b\u8bd5",level:3},{value:"vue-server-renderer \u63d2\u4ef6",id:"vue-server-renderer-\u63d2\u4ef6",level:2},{value:"createRenderer",id:"createrenderer",level:3},{value:"\u521b\u5efa\u6d4b\u8bd5\u9879\u76ee",id:"\u521b\u5efa\u6d4b\u8bd5\u9879\u76ee",level:2},{value:"\u4f7f\u7528 vue-cli\u521b\u5efa\u9879\u76ee",id:"\u4f7f\u7528-vue-cli\u521b\u5efa\u9879\u76ee",level:3},{value:"\u9879\u76ee\u76ee\u5f55\u7ed3\u6784",id:"\u9879\u76ee\u76ee\u5f55\u7ed3\u6784",level:3},{value:"\u66f4\u6539 .eslintrc.js \u7684\u914d\u7f6e",id:"\u66f4\u6539-eslintrcjs-\u7684\u914d\u7f6e",level:3},{value:"vue \u7248\u672c\u67e5\u770b",id:"vue-\u7248\u672c\u67e5\u770b",level:3},{value:"\u670d\u52a1\u7aef\u6e32\u67d3\u9996\u6b21\u4f53\u9a8c",id:"\u670d\u52a1\u7aef\u6e32\u67d3\u9996\u6b21\u4f53\u9a8c",level:3},{value:"\u63a5\u4e0b\u6765\uff0c\u8fdb\u884c demo2",id:"\u63a5\u4e0b\u6765\u8fdb\u884c-demo2",level:3},{value:"\u6784\u5efa\u6b65\u9aa4",id:"\u6784\u5efa\u6b65\u9aa4",level:2},{value:"\u540c\u6784\u5f00\u53d1SSR\u5e94\u2f64",id:"\u540c\u6784\u5f00\u53d1ssr\u5e94",level:3},{value:"\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570",id:"\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570",level:3},{value:"vue-hackernews \u5b98\u65b9 demo",id:"vue-hackernews-\u5b98\u65b9-demo",level:2},{value:"vueSSR \u670d\u52a1\u7aef\u6e32\u67d3\u7f13\u5b58",id:"vuessr-\u670d\u52a1\u7aef\u6e32\u67d3\u7f13\u5b58",level:2}],i={toc:p};function c(e){let{components:n,...l}=e;return(0,a.kt)("wrapper",(0,t.Z)({},i,l,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"vuessr"},"vueSSR"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://v2.ssr.vuejs.org/zh/"},"Vue.js \u670d\u52a1\u5668\u7aef\u6e32\u67d3\u6307\u5357")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://v2.ssr.vuejs.org/zh/api/#api-%E5%8F%82%E8%80%83"},"vue-server-renderer\u63d2\u4ef6Api\u4ecb\u7ecd")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/vuejs/vue-hackernews-2.0"},"vue-hackernews-\u5b98\u65b9demo"))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4f20\u7edfweb\u5f00\u53d1"),"\uff0c\u2f79\u2eda\u5185\u5bb9\u5728\u670d\u52a1\u7aef\u6e32\u67d3\u5b8c\u6210\uff0c\u2f00\u6b21\u6027\u4f20\u8f93\u5230\u6d4f\u89c8\u5668\uff0c\u2eda\u2faf\u67e5\u770b\u6e90\u7801\uff0c\u6d4f\u89c8\u5668\u62ff\u5230\u7684\u662f\u5168\u90e8\u7684dom\u7ed3\u6784\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5355\u2eda\u5e94\u2f64SPA\uff08Single-Page-App\uff09"),"\uff0c\u5355\u2eda\u5e94\u2f64\u4f18\u79c0\u7684\u2f64\u6237\u4f53\u9a8c\uff0c\u4f7f\u5176\u9010\u6e10\u6210\u4e3a\u4e3b\u6d41\uff0c\u2eda\u2faf\u5185\u5bb9\u7531JS\u6e32\u67d3\u51fa\u6765\uff0c\u8fd9\u79cd\u2f45\u5f0f\u79f0\u4e3a ",(0,a.kt)("strong",{parentName:"p"},"\u5ba2\u6237\u7aef\u6e32\u67d3"),"\uff0c\n\u2eda\u2faf\u67e5\u770b\u6e90\u7801\uff0c\u6d4f\u89c8\u5668\u62ff\u5230\u7684\u4ec5\u6709\u5bbf\u4e3b\u5143\u7d20#app\uff0c\u5e76\u6ca1\u6709\u5185\u5bb9"),(0,a.kt)("h2",{id:"\u5355\u5e94spa-\u4f18\u70b9"},"\u5355\u2eda\u5e94\u2f64SPA \u4f18\u70b9"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u8ba1\u7b97\u653e\u5230\u5ba2\u6237\u7aef"),(0,a.kt)("li",{parentName:"ul"},"\u7701\u6d41\u91cf")),(0,a.kt)("h3",{id:"\u5355\u5e94spa-\u7f3a\u70b9"},"\u5355\u2eda\u5e94\u2f64SPA \u7f3a\u70b9"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e0d\u5229\u4e8e SEO"),(0,a.kt)("li",{parentName:"ul"},"\u9996\u5c4f\u7684\u52a0\u8f7d\u901f\u5ea6")),(0,a.kt)("h2",{id:"\u4ec0\u4e48\u662f\u670d\u52a1\u5668\u7aef\u6e32\u67d3ssr"},"\u4ec0\u4e48\u662f\u670d\u52a1\u5668\u7aef\u6e32\u67d3SSR"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://v2.ssr.vuejs.org/zh/#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93-ssr"},"\u4ec0\u4e48\u662f\u670d\u52a1\u5668\u7aef\u6e32\u67d3SSR"))),(0,a.kt)("p",null,"SSR \u89e3\u51b3\u2f45\u6848\uff0c\u540e\u7aef\u6e32\u67d3\u51fa\u5b8c\u6574\u7684\u2fb8\u5c4f\u7684dom\u7ed3\u6784\u8fd4\u56de\uff0c\u524d\u7aef\u62ff\u5230\u7684\u5185\u5bb9\u5305\u62ec\u2fb8\u5c4f\u53ca\u5b8c\u6574 spa \u7ed3\u6784\uff0c\u5e94\n\u2f64\u6fc0\u6d3b\u540e\u4f9d\u7136\u6309\u7167 spa\u2f45\u5f0f\u8fd0\u2f8f\uff0c\u8fd9\u79cd\u2eda\u2faf\u6e32\u67d3\u2f45\u5f0f\u88ab\u79f0\u4e3a ",(0,a.kt)("strong",{parentName:"p"},"\u670d\u52a1\u7aef\u6e32\u67d3(Server Side Render)")),(0,a.kt)("h2",{id:"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e32\u67d3"},"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e32\u67d3"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://v2.ssr.vuejs.org/zh/#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93-ssr"},"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e32\u67d3"))),(0,a.kt)("h2",{id:"\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u70b9\u53bb\u7406\u89e3-vuessr"},"\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u70b9\u53bb\u7406\u89e3 vueSSR"),(0,a.kt)("h2",{id:"\u4f7f\u7528-vuessr-\u7248\u672c\u8981\u6c42"},"\u4f7f\u7528 vueSSR \u7248\u672c\u8981\u6c42"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"vue & vue-server-renderer 2.3.0+"),(0,a.kt)("li",{parentName:"ul"},"vue-router 2.5.0+"),(0,a.kt)("li",{parentName:"ul"},"vue-loader 12.0.0+ & vue-style-loader 3.0.0+"),(0,a.kt)("li",{parentName:"ul"},"vue-ssr\u9879\u76ee \u5b89\u88c5\u7684 vue \u4e0e vue-server-renderer \u7248\u672c\u4fdd\u6301\u4e00\u81f4")),(0,a.kt)("h3",{id:"\u5f53\u524d\u57fa\u4e8e-vue-cli-vuecli-501-\u5f00\u53d1\u6d4b\u8bd5"},"\u5f53\u524d\u57fa\u4e8e vue-cli @vue/cli 5.0.1 \u5f00\u53d1\u6d4b\u8bd5"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"mailto:vue@2.7.10"},"vue@2.7.10")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"mailto:vue-server-renderer@2.7.10"},"vue-server-renderer@2.7.10"))),(0,a.kt)("h2",{id:"vue-server-renderer-\u63d2\u4ef6"},"vue-server-renderer \u63d2\u4ef6"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://v2.ssr.vuejs.org/zh/api/"},"vue-server-renderer"))),(0,a.kt)("h3",{id:"createrenderer"},"createRenderer"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const { createRenderer } = require('vue-server-renderer')\nconst renderer = createRenderer()\n")),(0,a.kt)("h2",{id:"\u521b\u5efa\u6d4b\u8bd5\u9879\u76ee"},"\u521b\u5efa\u6d4b\u8bd5\u9879\u76ee"),(0,a.kt)("h3",{id:"\u4f7f\u7528-vue-cli\u521b\u5efa\u9879\u76ee"},"\u4f7f\u7528 vue-cli\u521b\u5efa\u9879\u76ee"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"vue create vue-ssr1\n// \u9009\u62e9 Manually select features \u81ea\u5b9a\u4e49\u914d\u7f6e\n// \u52fe\u9009 Babel\u3001Router\u3001Vuex\u3001CSS Pre-processors\u3001Lintter / Formatter \u8fd9\u51e0\u4e2a\u914d\u7f6e\u7684\n// \u8def\u7531 \u9009\u62e9\u9ed8\u8ba4\u7684 history \u6a21\u5f0f\n// CSS Pre-processors \u9009\u62e9 Sass/SCSS(with dart-sass)\n// Lintter / Formatter \u9009\u62e9 Standard config\n// \u9009\u62e9 Lint on save\n// \u9009\u62e9 In dedicated config files\n")),(0,a.kt)("p",null,"\u5728\u9879\u76ee vue-ss1 \u7684\uff0c\u6839\u76ee\u5f55 \u65b0\u5efa demo \u548c server \u76ee\u5f55\uff0cdemo \u7528\u4e8e\u524d\u671f\u7684\u6d4b\u8bd5\uff0cserver \u7528\u4e8e\u540e\u9762\u6574\u4f53 vueSSR \u670d\u52a1\u7aef\u7684\u6d4b\u8bd5"),(0,a.kt)("h3",{id:"\u9879\u76ee\u76ee\u5f55\u7ed3\u6784"},"\u9879\u76ee\u76ee\u5f55\u7ed3\u6784"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-md"}," vue-ssr1\n \u251c\u2500\u2500 README.md\n \u251c\u2500\u2500 babel.config.js\n \u251c\u2500\u2500 demo\n \u2502   \u251c\u2500\u2500 demo1.js\n \u2502   \u2514\u2500\u2500 demo2.js\n \u251c\u2500\u2500 jsconfig.json\n \u251c\u2500\u2500 package.json\n \u251c\u2500\u2500 public\n \u2502   \u251c\u2500\u2500 favicon.ico\n \u2502   \u2514\u2500\u2500 index.html\n \u251c\u2500\u2500 server\n \u2502   \u2514\u2500\u2500 index.js\n \u251c\u2500\u2500 src\n \u2502   \u251c\u2500\u2500 App.vue\n \u2502   \u251c\u2500\u2500 assets\n \u2502   \u2502   \u2514\u2500\u2500 logo.png\n \u2502   \u251c\u2500\u2500 components\n \u2502   \u2502   \u2514\u2500\u2500 HelloWorld.vue\n \u2502   \u251c\u2500\u2500 main.js\n \u2502   \u251c\u2500\u2500 router\n \u2502   \u2502   \u2514\u2500\u2500 index.js\n \u2502   \u251c\u2500\u2500 store\n \u2502   \u2502   \u2514\u2500\u2500 index.js\n \u2502   \u2514\u2500\u2500 views\n \u2502       \u251c\u2500\u2500 AboutView.vue\n \u2502       \u2514\u2500\u2500 HomeView.vue\n \u251c\u2500\u2500 vue.config.js\n \u2514\u2500\u2500 yarn.lock\n")),(0,a.kt)("h3",{id:"\u66f4\u6539-eslintrcjs-\u7684\u914d\u7f6e"},"\u66f4\u6539 .eslintrc.js \u7684\u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  root: true,\n  env: {\n    node: true\n  },\n  extends: [\n    'plugin:vue/essential',\n    '@vue/standard'\n  ],\n  parserOptions: {\n    parser: '@babel/eslint-parser'\n  },\n  rules: {\n    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off',\n    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off',\n    'space-before-function-paren': 'off',\n    'no-irregular-whitespace': 'off',\n    'no-unused-vars': 'off',\n    'vue/multi-word-component-names': 'off',\n    'no-throw-literal': 'off',\n    eqeqeq: 'off'\n  }\n}\n")),(0,a.kt)("h3",{id:"vue-\u7248\u672c\u67e5\u770b"},"vue \u7248\u672c\u67e5\u770b"),(0,a.kt)("p",null,"\u5728 main.js \u4e2d\uff0c\u6253\u5370\u67e5\u770b vue \u7248\u672c\u7684\u65e5\u5fd7"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// src/main.js\nconsole.log('vue \u7248\u672c:' + Vue.version)\n// vue \u7248\u672c: 2.7.10\n")),(0,a.kt)("p",null,"\u5c06\u9879\u76ee\u8dd1\u8d77\u6765\uff0c\u770b\u662f\u5426\u6709\u62a5\u9519"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"yarn serve\n")),(0,a.kt)("h3",{id:"\u670d\u52a1\u7aef\u6e32\u67d3\u9996\u6b21\u4f53\u9a8c"},"\u670d\u52a1\u7aef\u6e32\u67d3\u9996\u6b21\u4f53\u9a8c"),(0,a.kt)("p",null,"\u5b89\u88c52\u4e2a\u63d2\u4ef6 vue-server-renderer\u3001express\uff0cvue-server-renderer \u7248\u672c\u9700\u8981\u548c vue \u7684\u7248\u672c\u4fdd\u6301\u4e00\u81f4"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u4e0a\u9762\u62ff\u5230 vue\u7248\u672c \u662f 2.7.10\n// vue-server-renderer \u7248\u672c\u9700\u8981\u548c vue \u7684\u7248\u672c\u4fdd\u6301\u4e00\u81f4\nyarn add express vue-server-renderer@2.7.10\n")),(0,a.kt)("p",null,"\u5728 demo \u76ee\u5f55\u4e0b\u65b0\u5efa\uff0cdemo1.js"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"}," // /demo/demo1.js\n const express = require('express')\n const app = express()\n \n const Vue = require('vue')\n \n // \u5bfc\u5165 \u521b\u5efa\u6e32\u67d3\u5668\u65b9\u6cd5 createRenderer\n const { createRenderer } = require('vue-server-renderer')\n \n // \u5f97\u5230\u4e00\u4e2a\u6e32\u67d3\u5668\n const renderer = createRenderer()\n \n // \u89e3\u6790\u6d4f\u89c8\u5668\u7684\u8bf7\u6c42\uff0c\u548c\u54cd\u5e94\n app.get('*', async (req, res) => {\n   try {\n     // \u5f53\u6709\u670d\u52a1\u5668\u8bf7\u6c42\u65f6\uff0c\u521b\u5efa\u4e00\u4e2a Vue \u5b9e\u4f8b\n     const vm = new Vue({\n       template: '<div>{{ msg }}</div>',\n       data () {\n         return {\n           msg: '\u670d\u52a1\u7aef\u6e32\u67d3\u9996\u6b21\u4f53\u9a8c'\n         }\n       }\n     })\n     // \u8c03\u7528 renderer \u7684 renderToString \u65b9\u6cd5\uff0c\u5e76\u4f20\u5165 \u4e00\u4e2a Vue \u5b9e\u4f8b vm\n     // \u56de\u5f97\u5230\u4e00\u4e2a \u5b57\u7b26\u4e32\n     // <div data-server-rendered=\"true\">\u670d\u52a1\u7aef\u6e32\u67d3\u9996\u6b21\u4f53\u9a8c</div>\n     const html = await renderer.renderToString(vm)\n \n     // \u670d\u52a1\u7aef\u54cd\u5e94\u6d4f\u89c8\u5668\u8bf7\u6c42\uff0c\u5c06\u751f\u6210\u7684 \u5b57\u7b26\u4e32 \u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\n     res.send(html)\n   } catch (error) {\n     res.status(500).end('Server Error!')\n   }\n })\n \n app.listen(3000, async () => {\n   console.log('\u670d\u52a1\u5668\u8fd0\u884c\u4e86\uff0c\u7aef\u53e3\uff1a3000')\n })\n")),(0,a.kt)("h3",{id:"\u63a5\u4e0b\u6765\u8fdb\u884c-demo2"},"\u63a5\u4e0b\u6765\uff0c\u8fdb\u884c demo2"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u521b\u5efa\u91cd\u590d\u6267\u884c\u7684\u5de5\u5382\u51fd\u6570 creteApp\uff0c\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6839 Vue \u5b9e\u4f8b"),(0,a.kt)("li",{parentName:"ul"},"\u521b\u5efa\u6e32\u67d3\u5668\u65f6\uff0c\u6307\u5b9a template \u6a21\u677f"),(0,a.kt)("li",{parentName:"ul"},"render \u6e32\u67d3\u5668\u6267\u884c renderToString \u7684\u989d\u5916\u53c2\u6570 ",(0,a.kt)("a",{parentName:"li",href:"https://v2.ssr.vuejs.org/zh/api/#renderer-%E9%80%89%E9%A1%B9"},"render\u53c2\u6570"))),(0,a.kt)("p",null,"\u5728 demo \u76ee\u5f55\u4e0b\u65b0\u5efa\uff0c\u4e00\u4e2a ssr.template.html \u6a21\u677f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html>\n <head>\n  <meta charset="utf-8">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1.0">\n  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />\n  <meta http-equiv="Pragma" content="no-cache" />\n  <meta http-equiv="Expires" content="0" />\n  <meta name ="viewport" content ="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover">\n  <meta name="apple-mobile-web-app-capable" content="yes">\n  <meta name="apple-mobile-web-app-title" content="vueSSR">\n  <meta name="apple-mobile-web-app-capable" content="yes"/>\n  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">\n  <meta name="x5-orientation" content="portrait">\n  <meta name="format-detection" content="telephone=no" />\n  <meta name="renderer" content="webkit">\n  {{{ meta }}}\n  <title>{{ title }}</title>\n </head>\n <body>\n  \x3c!--vue-ssr-outlet--\x3e\n </body>\n</html>\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// /demo/demo2.js\nconst express = require('express')\nconst app = express()\nconst fs = require('fs')\nconst path = require('path')\nconst resolve = dir => path.resolve(__dirname, dir)\n\nconst Vue = require('vue')\nconst { createRenderer } = require('vue-server-renderer')\nconst renderTemplate = fs.readFileSync(resolve('../public/index.html'), 'utf-8')\nconst render = createRenderer({\n  template: renderTemplate\n})\nconst renderOptions = {\n  meta: [\n    '<meta name=\"renderer\" content=\"webkit\">'\n  ]\n}\napp.get('*', async(req, res) => {\n  try {\n    const vm = new Vue({\n      template: '<h3>{{ msg }}</h3>',\n      data() {\n        return {\n          msg: 'Vue SSR demo2'\n        }\n      }\n    })\n    const html = await render.renderToString(vm, renderOptions)\n    res.send(html)\n  } catch (error) {\n    res.status(500).end('Server Error!')\n  }\n})\n\napp.listen(3000, function() {\n  console.log('server run at 3000 port')\n})\n")),(0,a.kt)("h2",{id:"\u6784\u5efa\u6b65\u9aa4"},"\u6784\u5efa\u6b65\u9aa4"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://v2.ssr.vuejs.org/zh/guide/structure.html#%E4%BB%8B%E7%BB%8D%E6%9E%84%E5%BB%BA%E6%AD%A5%E9%AA%A4"},"\u6784\u5efa\u6b65\u9aa4")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"vueSSR1",src:r(6545).Z,width:"1946",height:"892"})),(0,a.kt)("p",null,"\u2f6c\u6807\u662f\u2f63\u6210\u2f00\u4e2a\u300c\u670d\u52a1\u5668 bundle\u300d\u2f64\u4e8e\u670d\u52a1\u7aef\u2fb8\u5c4f\u6e32\u67d3\uff0c\u548c\u2f00\u4e2a\u300c\u5ba2\u6237\u7aefbundle\u300d\u2f64\u4e8e\u5ba2\u6237\u7aef\u6fc0\u6d3b"),(0,a.kt)("h3",{id:"\u540c\u6784\u5f00\u53d1ssr\u5e94"},"\u540c\u6784\u5f00\u53d1SSR\u5e94\u2f64"),(0,a.kt)("p",null,"\u5bf9\u4e8e\u540c\u6784\u5f00\u53d1\uff0c\u6211\u4eec\u4f9d\u7136\u4f7f\u2f64 webpack \u6253\u5305\uff0c\u6211\u4eec\u8981\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a",(0,a.kt)("strong",{parentName:"p"},"\u670d\u52a1\u7aef\u2fb8\u5c4f\u6e32\u67d3")," \u548c ",(0,a.kt)("strong",{parentName:"p"},"\u5ba2\u6237\u7aef\u6fc0\u6d3b")),(0,a.kt)("h3",{id:"\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570"},"\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://v2.ssr.vuejs.org/zh/guide/universal.html#%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"},"\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570"))),(0,a.kt)("p",null,"\u7531\u4e8e\u6ca1\u6709\u52a8\u6001\u66f4\u65b0\uff0c\u6240\u6709\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570\u4e2d\uff0c\u53ea\u6709 beforeCreate \u548c created \u4f1a\u5728\u670d\u52a1\u5668\u7aef\u6e32\u67d3 (SSR) \u8fc7\u7a0b\u4e2d\u88ab\u8c03\u7528\u3002\n\u8fd9\u5c31\u662f\u8bf4\u4efb\u4f55\u5176\u4ed6\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570\u4e2d\u7684\u4ee3\u7801\uff08\u4f8b\u5982 beforeMount \u6216 mounted\uff09\uff0c\u53ea\u4f1a\u5728\u5ba2\u6237\u7aef\u6267\u884c"),(0,a.kt)("p",null,"\u6ce8\u610f\uff1a"),(0,a.kt)("h2",{id:"vue-hackernews-\u5b98\u65b9-demo"},"vue-hackernews \u5b98\u65b9 demo"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/vuejs/vue-hackernews-2.0"},"vue-hackernews"))),(0,a.kt)("p",null,"node\u7248\u672c\u8981\u6c42 >4 | <9\uff0cnode \u4f7f\u7528 8 \u8fd9\u4e2a\u7248\u672c\u7684\u8fdb\u884c\u5b89\u88c5 node_modules"),(0,a.kt)("p",null,"\u7ec4\u4ef6\u7f13\u5b58\u4f7f\u7528 ",(0,a.kt)("a",{parentName:"p",href:"mailto:lru-cache@4.1.1"},"lru-cache@4.1.1"),"\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/isaacs/node-lru-cache/tree/e992f26547a575299fc8d232580e53229393ea7a"},"lru-cache@4.1.1")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"nvm current\nnvm install 8\nnvm use 8\n")),(0,a.kt)("h2",{id:"vuessr-\u670d\u52a1\u7aef\u6e32\u67d3\u7f13\u5b58"},"vueSSR \u670d\u52a1\u7aef\u6e32\u67d3\u7f13\u5b58"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://v2.ssr.vuejs.org/zh/api/#cache"},"render\u6e32\u67d3\u5668 cache\u53c2\u6570"))),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.sofineday.com/vuepress-catalog.html#_3-%E6%B8%85%E9%99%A4-cdn-%E7%BC%93%E5%AD%98"}),"\n",(0,a.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/jingh/p/11133250.html"}),"\n",(0,a.kt)("a",{parentName:"p",href:"https://www.jb51.net/article/211143.htm"})))}c.isMDXComponent=!0},6545:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/vueSSR1-94e8c534c5208e36e3a118c062a2900f.png"}}]);