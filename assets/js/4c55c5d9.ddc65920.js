"use strict";(self.webpackChunksunsboyxu_docs=self.webpackChunksunsboyxu_docs||[]).push([[1799],{9423:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>u,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var o=t(3274),i=t(1377);const s={},r="pinia",c={id:"webs/vue/vue3/vue3-pinia",title:"pinia",description:"\u76f8\u5173\u6587\u6863",source:"@site/docs/webs/vue/vue3/vue3-pinia.md",sourceDirName:"webs/vue/vue3",slug:"/webs/vue/vue3/vue3-pinia",permalink:"/yogeexu-docs/webs/vue/vue3/vue3-pinia",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Nuxt3",permalink:"/yogeexu-docs/webs/vue/vue3/vue3-nuxt3"},next:{title:"vue3\u76f8\u5173\u63d2\u4ef6",permalink:"/yogeexu-docs/webs/vue/vue3/vue3-plugins"}},u={},l=[{value:"\u76f8\u5173\u6587\u6863",id:"\u76f8\u5173\u6587\u6863",level:2},{value:"devtools \u652f\u6301",id:"devtools-\u652f\u6301",level:2},{value:"\u70ed\u66f4\u65b0",id:"\u70ed\u66f4\u65b0",level:2},{value:"\u63d2\u4ef6",id:"\u63d2\u4ef6",level:2},{value:"\u5bf9\u6bd4 vuex",id:"\u5bf9\u6bd4-vuex",level:2},{value:"\u521b\u5efa\u4e00\u4e2a vue3 + vite3 + pinia \u9879\u76ee\u7528\u4e8e\u6d4b\u8bd5",id:"\u521b\u5efa\u4e00\u4e2a-vue3--vite3--pinia-\u9879\u76ee\u7528\u4e8e\u6d4b\u8bd5",level:2},{value:"\u5b89\u88c5 pinia",id:"\u5b89\u88c5-pinia",level:2},{value:"createPinia pinia\u7684\u521d\u59cb\u5316\uff0c\u63d2\u4ef6\u7684\u6ce8\u518c",id:"createpinia-pinia\u7684\u521d\u59cb\u5316\u63d2\u4ef6\u7684\u6ce8\u518c",level:2},{value:"defineStore \u521b\u5efa store",id:"definestore-\u521b\u5efa-store",level:2},{value:"\u521b\u5efa store \u7684\u51e0\u79cd\u65b9\u5f0f",id:"\u521b\u5efa-store-\u7684\u51e0\u79cd\u65b9\u5f0f",level:2},{value:"\u9875\u9762\u6216\u8005\u7ec4\u4ef6\u4f7f\u7528\u521b\u5efa\u7684 store",id:"\u9875\u9762\u6216\u8005\u7ec4\u4ef6\u4f7f\u7528\u521b\u5efa\u7684-store",level:2}];function a(n){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"pinia",children:"pinia"}),"\n",(0,o.jsx)(e.h2,{id:"\u76f8\u5173\u6587\u6863",children:"\u76f8\u5173\u6587\u6863"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://pinia.vuejs.org/",children:"pinia"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://pinia.vuejs.org/zh/index.html",children:"pinia\u4e2d\u6587"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/rA879t1-pI_F4TdWNkXafQ",children:"\u65b0\u4e00\u4ee3\u72b6\u6001\u7ba1\u7406\u5de5\u5177\uff0cPinia.js \u4e0a\u624b\u6307\u5357"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://www.jianshu.com/p/c7e6386577ce",children:"pinia\u5165\u95e8\u6559\u7a0b1"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://mp.weixin.qq.com/s/uRN2QCitn8Ikkbp9gHMBfA",children:"\u4e00\u6587\u89e3\u6790 Pinia \u548c Vuex \uff0c\u5e26\u4f60\u5168\u9762\u7406\u89e3\u8fd9\u4e24\u4e2a Vue \u72b6\u6001\u7ba1\u7406\u6a21\u5f0f"})}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:["Pinia \u662f Vue \u7684\u4e13\u5c5e\u72b6\u6001\u7ba1\u7406\u5e93\uff0c\u5b83\u5141\u8bb8\u4f60\u8de8\u7ec4\u4ef6\u6216\u9875\u9762\u5171\u4eab\u72b6\u6001\u3002\n\u5982\u679c\u719f\u6089\u7ec4\u5408\u5f0f API \u7684\u8bdd\uff0c\u4f60\u53ef\u80fd\u4f1a\u8ba4\u4e3a\u53ef\u4ee5\u901a\u8fc7\u4e00\u884c\u7b80\u5355\u7684 ",(0,o.jsx)(e.em,{children:(0,o.jsxs)(e.strong,{children:["export const state = reactive(",")"]})})," \u6765\u5171\u4eab\u4e00\u4e2a\u5168\u5c40\u72b6\u6001\uff0c\u5bf9\u4e8e\u5355\u9875\u5e94\u7528\u6765\u8bf4\u786e\u5b9e\u53ef\u4ee5\uff0c\n\u5982\u679c\u5e94\u7528\u5728\u670d\u52a1\u5668\u7aef\u6e32\u67d3\uff0c\u8fd9\u53ef\u80fd\u4f1a\u4f7f\u4f60\u7684\u5e94\u7528\u66b4\u9732\u51fa\u4e00\u4e9b\u5b89\u5168\u6f0f\u6d1e\uff0c"]}),"\n",(0,o.jsx)(e.p,{children:"Pinia.js \u662f\u65b0\u4e00\u4ee3\u7684\u72b6\u6001\u7ba1\u7406\u5668\uff0c\u7531 Vue.js\u56e2\u961f\u4e2d\u6210\u5458\u6240\u5f00\u53d1\u7684\uff0c\u56e0\u6b64\u4e5f\u88ab\u8ba4\u4e3a\u662f\u4e0b\u4e00\u4ee3\u7684 Vuex\uff0c\u5373 Vuex5.x\uff0c\u5728 Vue3.0 \u7684\u9879\u76ee\u4e2d\u4f7f\u7528\u4e5f\u662f\u5907\u53d7\u63a8\u5d07"}),"\n",(0,o.jsx)(e.p,{children:"\u4f7f\u7528 Pinia\uff0c\u5373\u4f7f\u5728\u5c0f\u578b\u5355\u9875\u5e94\u7528\u4e2d\uff0c\u53ef\u4ee5\u83b7\u5f97\u5982\u4e0b\u529f\u80fd\uff1a"}),"\n",(0,o.jsx)(e.h2,{id:"devtools-\u652f\u6301",children:"devtools \u652f\u6301"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u8ffd\u8e2a actions\u3001mutations \u7684\u65f6\u95f4\u7ebf"}),"\n",(0,o.jsx)(e.li,{children:"\u5728\u7ec4\u4ef6\u4e2d\u5c55\u793a\u5b83\u4eec\u6240\u7528\u5230\u7684 Store"}),"\n",(0,o.jsx)(e.li,{children:"\u8ba9\u8c03\u8bd5\u66f4\u5bb9\u6613\u7684 Time travel"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"\u70ed\u66f4\u65b0",children:"\u70ed\u66f4\u65b0"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u4e0d\u5fc5\u91cd\u8f7d\u9875\u9762\u5373\u53ef\u4fee\u6539 Store"}),"\n",(0,o.jsx)(e.li,{children:"\u5f00\u53d1\u65f6\u53ef\u4fdd\u6301\u5f53\u524d\u7684 State"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"\u63d2\u4ef6",children:"\u63d2\u4ef6"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u53ef\u901a\u8fc7\u63d2\u4ef6\u6269\u5c55 Pinia \u529f\u80fd"}),"\n",(0,o.jsx)(e.li,{children:"\u4e3a JS \u5f00\u53d1\u8005\u63d0\u4f9b\u9002\u5f53\u7684 TypeScript \u652f\u6301\u4ee5\u53ca\u81ea\u52a8\u8865\u5168\u529f\u80fd"}),"\n",(0,o.jsx)(e.li,{children:"\u652f\u6301\u670d\u52a1\u7aef\u6e32\u67d3"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"\u5bf9\u6bd4-vuex",children:"\u5bf9\u6bd4 vuex"}),"\n",(0,o.jsx)(e.p,{children:"pinia \u8db3\u591f\u8f7b\u91cf\uff0c\u538b\u7f29\u540e\u7684\u4f53\u79ef\u53ea\u67091.6kb"}),"\n",(0,o.jsx)(e.p,{children:"pinia \u53bb\u9664 mutations\uff0c\u53ea\u6709 state\uff0cgetters\uff0cactions\uff0cactions \u652f\u6301\u540c\u6b65\u548c\u5f02\u6b65"}),"\n",(0,o.jsx)(e.p,{children:"pinia \u7528\u4e8e\u53d6\u4ee3 vuex\uff0c\u652f\u6301 vue2 \u548c vue3\uff0c\u540c\u65f6 \u6709\u66f4\u597d\u7684 typescript \u7684\u7c7b\u578b\u652f\u6301"}),"\n",(0,o.jsx)(e.p,{children:"pinia \u9ed8\u8ba4\u652f\u6301\u591a\u4ed3\u5e93\uff0c\u800c vuex \u662f\u5178\u578b\u7684\u5355\u4ed3\u5e93\uff0c$store.state \u5bfc\u81f4\u6240\u6709\u7684\u72b6\u6001\u90fd\u653e\u5230\u4e00\u4e2a store \u91cc\uff0c\u5f53\u7136 vuex \u53ef\u4ee5\u4f7f\u7528\u6a21\u5757\uff08modules\uff09\u6765\u533a\u5206\u4e0d\u540c\u7684\u6a21\u5757"}),"\n",(0,o.jsx)(e.p,{children:"pinia \u9ed8\u8ba4\u4e0d\u91c7\u7528\u547d\u540d\u7a7a\u95f4\u7684\u65b9\u5f0f\u7ba1\u7406\uff0c\u62cd\u5e73\u5316\uff0c\u6bcf\u4e2a\u72b6\u6001\u90fd\u53ef\u4ee5\u662f\u5355\u72ec\u7684 store\uff0c\u5982\uff1aorderStore.orderinfo\u3001userStore.userinfo\uff0c\u4f7f\u7528\u8d77\u6765\u6bd4\u8f83\u65b9\u4fbf\uff0c\u5404\u4e2a store \u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u8c03\u7528"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u5047\u8bbe $store.state.a \u6709\u4e2a a \u5c5e\u6027\uff0c\u6b64\u65f6\u53c8\u6709\u4e2a\u540c\u540d\u7684 a \u6a21\u5757\uff0c\u5c31\u4f1a\u4ea7\u751f\u51b2\u7a81"}),"\n",(0,o.jsx)(e.li,{children:"vuex \u4e0b\u7684 \u6811\u72b6\u7ed3\u6784\u4e0d\u597d\u7ef4\u62a4\uff0c\u5982 $store.state.user.userinfo.username"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"\u521b\u5efa\u4e00\u4e2a-vue3--vite3--pinia-\u9879\u76ee\u7528\u4e8e\u6d4b\u8bd5",children:"\u521b\u5efa\u4e00\u4e2a vue3 + vite3 + pinia \u9879\u76ee\u7528\u4e8e\u6d4b\u8bd5"}),"\n",(0,o.jsx)(e.p,{children:"\u9879\u76ee\u540d\u79f0\uff1avite3-pinia-app"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"yarn create vite vite3-pinia-app --template vue\n# pnpm create vite vite3-pinia-app --template vue\n# npm create vite@latest vite3-pinia-app --template vue\n\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u5b89\u88c5-pinia",children:"\u5b89\u88c5 pinia"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"yarn add pinia -S\n# pnpm install pinia -S\n# npm install pinia -S\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5728 src \u76ee\u5f55\u4e0b\uff0c\u65b0\u5efa store\u76ee\u5f55\uff0c\u5e76\u65b0\u5efa index.js \u7528\u4e8e\u521d\u59cb\u5316 pinia \u5373 vue.use() pinia \u63d2\u4ef6\u7684\u6ce8\u518c\u3001count1.js\u3001count2.js"}),"\n",(0,o.jsx)(e.p,{children:"\u9879\u76ee\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",metastring:"title=vite3-pinia-app",children:"\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 public\n|  \u2514\u2500\u2500 vite.svg\n\u251c\u2500\u2500 src\n|  \u251c\u2500\u2500 App.vue\n|  \u251c\u2500\u2500 assets\n|  |  \u2514\u2500\u2500 vue.svg\n|  \u251c\u2500\u2500 components\n|  \u251c\u2500\u2500 main.js\n|  \u251c\u2500\u2500 store\n|  |  \u251c\u2500\u2500 count1.js // countStore1 \u91c7\u7528 options API \u5199\u6cd5\n|  |  \u251c\u2500\u2500 count2.js // countStore2 \u91c7\u7528 composition API \u5199\u6cd5\n|  |  \u2514\u2500\u2500 index.js // \u521d\u59cb\u5316 pinia,vue.use()\n|  \u2514\u2500\u2500 style.css\n\u251c\u2500\u2500 vite.config.js\n\u2514\u2500\u2500 yarn.lock\n"})}),"\n",(0,o.jsx)(e.h2,{id:"createpinia-pinia\u7684\u521d\u59cb\u5316\u63d2\u4ef6\u7684\u6ce8\u518c",children:"createPinia pinia\u7684\u521d\u59cb\u5316\uff0c\u63d2\u4ef6\u7684\u6ce8\u518c"}),"\n",(0,o.jsx)(e.p,{children:"src/store/index.js \u4ee3\u7801"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/store/index.js\nimport { createPinia } from 'pinia'\n\nconst store = createPinia()\n\nexport default store\n"})}),"\n",(0,o.jsx)(e.p,{children:"src/main.js"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/main.js\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport store from './store'\n\nconst app = createApp(App)\n\napp.use(store).mount('#app')\n"})}),"\n",(0,o.jsx)(e.h2,{id:"definestore-\u521b\u5efa-store",children:"defineStore \u521b\u5efa store"}),"\n",(0,o.jsx)(e.p,{children:"defineStore \u65b9\u6cd5 \u7528\u4e8e \u521b\u5efa store"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import { defineStore } from 'pinia'\n// const store = defineStore(id,options)\n// const store = defineStore(options)\n// const store = defineStore(id, fn)\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u521b\u5efa-store-\u7684\u51e0\u79cd\u65b9\u5f0f",children:"\u521b\u5efa store \u7684\u51e0\u79cd\u65b9\u5f0f"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"defineStore(id,options)"}),"\n",(0,o.jsx)(e.li,{children:"defineStore(options)"}),"\n",(0,o.jsx)(e.li,{children:"defineStore(id, fn)"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// defineStore(id,options) \u65b9\u5f0f\nimport { defineStore } from 'pinia'\n\n// \u4f7f\u7528\u7684\u5730\u65b9\u89e3\u6784\u7684\u65b9\u5f0f\u5bfc\u5165\nexport const useCountStore1 = defineStore('countStore1', {\n  // state \u9700\u8981\u5b9a\u4e49\u4e3a\u51fd\u6570\n  state:() => ({ // state \u5b9a\u4e49\u65b9\u5f0f\u4e00\n    count: 0 \n  }),\n  state: () => { // state \u5b9a\u4e49\u65b9\u5f0f\u4e8c\n    return {\n      count: 0\n    }\n  },\n  getters: {\n    dounbleCount() {\n      return this.count * 2\n    }\n  },\n  actions: {\n    increment() {\n      this.count++\n    }\n  }\n})\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5c06 \u5b9a\u4e49 id \u653e\u5728 options \u4e2d"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import { defineStore } from 'pinia'\nconst useCountStore1 = defineStore({\n  id: 'countStore1',\n  state: () => ({\n    count: 0\n  }),\n  getters: {\n    ...\n  },\n  actions: {\n    ...\n  }\n})\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u91c7\u7528\u51fd\u6570\u5f0f\u65b9\u5f0f\uff0c\u7c7b\u4f3c hooks\uff0c\u66f4\u597d\u7684\u5c06\u4ee3\u7801\u805a\u96c6"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nconst useCountStore1 = defineStore('countStore2', () => {\n  const count = ref(0)\n  const double = computed(() => count.value * 2)\n  const increment = () => {\n    count.value++\n  }\n  const decrement = () => {\n    count.value--\n  }\n  return {\n    count,\n    doubleCount,\n    increment,\n    decrement\n  }\n})\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u9875\u9762\u6216\u8005\u7ec4\u4ef6\u4f7f\u7528\u521b\u5efa\u7684-store",children:"\u9875\u9762\u6216\u8005\u7ec4\u4ef6\u4f7f\u7528\u521b\u5efa\u7684 store"}),"\n",(0,o.jsx)(e.p,{children:"\u4e0a\u9762\u4ecb\u7ecd\u4e86 defineStore \u7684\u4f7f\u7528\uff0c\u5373 store \u521b\u5efa\u4ee5\u53ca\u521b\u5efa\u65b9\u5f0f\uff0c\u5982\uff1auseCountStore1 \u548c useCountStore2"}),"\n",(0,o.jsx)(e.p,{children:"\u521b\u5efa store \u540e\uff0c\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u5728\u9875\u9762\u4f7f\u7528"}),"\n",(0,o.jsx)(e.p,{children:"\u9996\u5148\uff0c\u5728 src/store \u4e0b\uff0c\u5efa\u7acb count1.js \u548c count2.js"}),"\n",(0,o.jsx)(e.p,{children:"useCountStore1 \u4f7f\u7528 options API \u7684\u65b9\u5f0f\u521b\u5efa"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",metastring:"title=src/store/count1.js",children:"// src/store/count1.js\n// useCountStore1\n\n/**\n * options API \u65b9\u5f0f\u521b\u5efa\n * state \u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\n * this \u6307\u5411\u5f53\u524d store -> useCountStore1\n*/\nimport { defineStore } from 'pinia'\n\nconst useCountStore1 = defineStore('countStore1', {\n  // state: () => {\n  //   return {\n  //     count: 0\n  //   }\n  // },\n  state: () => ({\n    count: 0\n  }),\n  getters: {\n    doubleCount() {\n      return this.count * 2\n    }\n  },\n  actions: {\n    // \u52a0\u5165\u8d2d\u7269\u8f66\n    increment() {\n      this.count++\n    },\n    // \u79fb\u9664\u8d2d\u7269\u8f66\n    decrement() {\n      this.count--\n    }\n  }\n})\n\nexport default useCountStore1\n"})}),"\n",(0,o.jsx)(e.p,{children:"useCountStore2 \u4f7f\u7528 Composition API \u7684\u65b9\u5f0f\u521b\u5efa"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",metastring:"title=src/store/count2.js",children:"// src/store/count2.js\n// useCountStore2\n\n/**\n * Composition API \u65b9\u5f0f\u521b\u5efa\n * state \u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\n*/\nimport { defineStore } from 'pinia'\nimport { computed, ref } from 'vue'\n\nconst useCountStore2 = defineStore('countStore2', () => {\n  // \u5b9a\u4e49\u4e00\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\uff0c\u7c7b\u4f3c state\n  const count = ref(0)\n\n  // \u5b9a\u4e49\u4e00\u4e2a\u8ba1\u7b97\u5c5e\u6027\uff0c\u7c7b\u4f3c getters\n  const doubleCount = computed(() => count.value * 2)\n\n  // \u4e0b\u9762\u7684\u65b9\u6cd5\uff0c\u7c7b\u4f3c actions\n  \n  // \u52a0\u5165\u8d2d\u7269\u8f66\n  // const increment = () => {\n  //   count.value++\n  // }\n  \n  /**\n   * \u4e0a\u9762\u4f7f\u7528\u7684 \u7bad\u5934\u51fd\u6570\uff0cthis -> undefined\n   * \u5c1d\u8bd5\u4e0d\u4f7f\u7528 \u7bad\u5934\u51fd\u6570 this \u6307\u5411\u5f53\u524d store -> useCountStore2\uff0cthis.count++ \u6216\u8005 count.value++\n  */\n  \n  // \u52a0\u5165\u8d2d\u7269\u8f66\n  const increment = function() {\n    // this.count++\n    count.value++\n    console.log(this)\n    console.log(this.count)\n    console.log(this.doubleCount)\n  }\n\n  // \u79fb\u9664\u8d2d\u7269\u8f66\n  const decrement = () => {\n    count.value--\n  }\n\n  return {\n    count,\n    doubleCount,\n    increment,\n    decrement\n  }\n  // \u611f\u89c9\u5c31\u50cf\u5199 .vue \u4e2d\u7684 script??? \u5f88\u50cf hooks???\u89c9\u5f97\u8fd9\u6837\u66f4\u597d\u7684\u5c06\u4ee3\u7801\u805a\u96c6\u8d77\u6765\uff0c\u4e00\u76ee\u4e86\u7136\n})\n\nexport default useCountStore2\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5f53\u524d\u662f\u5728 App.vue \u4e2d\u6765\u4f7f\u7528 useCountStore1 \u548c useCountStore2"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-html",metastring:"title=src/App.vue",children:'<template>\n  <div>\n    <h3>vue3 + vite3 + pinia</h3>\n    <div>\n      <h3>useCountStore1</h3>\n      <p>\u8d2d\u7269\u8f66\uff1a{{ countStore1.count }} / {{ countStore1.doubleCount }}</p>\n      <div>\n        <button @click="handleAdd1">\u52a0\u5165\u8d2d\u7269\u8f661</button>\n        \x3c!-- \u5141\u8bb8\u76f4\u63a5\u901a\u8fc7 countStore1 \u6765\u4fee\u6539 state\uff0c\u4f46\u8fd9\u79cd\u64cd\u4f5c\u4e00\u822c\u90fd\u653e\u5728 actions \u4e2d\u6765\u7edf\u4e00\u5c01\u88c5 --\x3e\n        <button @click="countStore1.count++">\u52a0\u5165\u8d2d\u7269\u8f662</button>\n        <button @click="handleRemove1">\u79fb\u9664\u8d2d\u7269\u8f661</button>\n      </div>\n      <hr color="#646cff" />\n      <h3>useCountStore2</h3>\n      <p>\u4f7f\u7528\uff0c\u89e3\u6784\u65b9\u5f0f</p>\n      <p>\u8d2d\u7269\u8f66\uff1a{{ count2 }} / {{ doubleCount2 }}</p>\n      <div>\n        <button @click="handleAdd2">\u52a0\u5165\u8d2d\u7269\u8f662</button>\n        <button @click="handleRemove2">\u79fb\u9664\u8d2d\u7269\u8f662</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\n  /**\n   * @store \u662f\u5728 vite.config.js \u4e2d\u914d\u7f6e\u4e86 resolve \u4e0b\u7684 alias\n   */\n  import useCountStore1 from \'@store/count1\'\n  import useCountStore2 from \'@store/count2\'\n  import { storeToRefs } from \'pinia\'\n\n  // useCountStore1\n  const countStore1 = useCountStore1()\n  console.log(countStore1, \'countStore1--\')\n  const handleAdd1 = () => {\n    countStore1.increment()\n  }\n  const handleRemove1 = () => {\n    countStore1.decrement()\n  }\n\n  // useCountStore2\n  const countStore2 = useCountStore2()\n  console.log(countStore2, \'countStore2--\')\n\n  // state \u548c getter \u7684 \u89e3\u6784\n  // \u76f4\u63a5\u89e3\u6784\u4f1a\u5931\u53bb\u54cd\u5e94\u5f0f\uff0c\u901a\u8fc7 pinia \u63d0\u4f9b\u7684\u65b9\u6cd5 storeToRefs \u8fdb\u884c\u89e3\u6784\n  // count: count2 \u89e3\u6784\u65f6\uff0c\u8d77\u522b\u540d\n  const { count: count2, doubleCount: doubleCount2 } = storeToRefs(countStore2)\n\n  // actions \u7684\u89e3\u6784\n  // decrement: decrement2 \u89e3\u6784\u65f6\uff0c\u8d77\u522b\u540d\n  const { increment, decrement: decrement2 } = countStore2\n  const handleAdd2 = () => {\n    increment()\n  }\n  const handleRemove2 = () => {\n    decrement2()\n  }\n<\/script>\n'})})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(a,{...n})}):a(n)}},1377:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>c});var o=t(9474);const i={},s=o.createContext(i);function r(n){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);