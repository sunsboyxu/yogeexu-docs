"use strict";(self.webpackChunksunsboyxu_docs=self.webpackChunksunsboyxu_docs||[]).push([[7123],{4477:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var o=t(3274),s=t(1377);const r={},c="React \u7ec4\u4ef6",i={id:"webs/react/React-component",title:"React \u7ec4\u4ef6",description:"- \u7ec4\u4ef6 & Props",source:"@site/docs/webs/react/2-React-component.md",sourceDirName:"webs/react",slug:"/webs/react/React-component",permalink:"/yogeexu-docs/webs/react/React-component",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"React",permalink:"/yogeexu-docs/webs/react/React"},next:{title:"react\u7ec4\u4ef6\u5e93",permalink:"/yogeexu-docs/webs/react/React-component-ui"}},a={},l=[{value:"Class \u7ec4\u4ef6",id:"class-\u7ec4\u4ef6",level:2},{value:"Function \u7ec4\u4ef6",id:"function-\u7ec4\u4ef6",level:2},{value:"Fragments",id:"fragments",level:2},{value:"\u7ec4\u4ef6\u590d\u5408 - Composition",id:"\u7ec4\u4ef6\u590d\u5408---composition",level:2},{value:"PureComponent",id:"purecomponent",level:2},{value:"Context",id:"context",level:2},{value:"\u4f55\u65f6\u4f7f\u7528 Context",id:"\u4f55\u65f6\u4f7f\u7528-context",level:3},{value:"\u4f7f\u7528 Context \u4e4b\u524d\u7684\u8003\u8651",id:"\u4f7f\u7528-context-\u4e4b\u524d\u7684\u8003\u8651",level:3},{value:"Context Api",id:"context-api",level:3},{value:"React.createContext",id:"reactcreatecontext",level:3},{value:"Context.Provider",id:"contextprovider",level:3},{value:"Class.contextType",id:"classcontexttype",level:3},{value:"Context.Consumer",id:"contextconsumer",level:3},{value:"Context.displayName",id:"contextdisplayname",level:3},{value:"\u52a8\u6001 Context",id:"\u52a8\u6001-context",level:3},{value:"\u5728\u5d4c\u5957\u7ec4\u4ef6\u4e2d\u66f4\u65b0 Context",id:"\u5728\u5d4c\u5957\u7ec4\u4ef6\u4e2d\u66f4\u65b0-context",level:3},{value:"\u591a\u4e2a Context",id:"\u591a\u4e2a-context",level:3},{value:"Context \u6ce8\u610f\u4e8b\u9879",id:"context-\u6ce8\u610f\u4e8b\u9879",level:3},{value:"createPortal",id:"createportal",level:2},{value:"\u9ad8\u9636\u7ec4\u4ef6-HOC",id:"\u9ad8\u9636\u7ec4\u4ef6-hoc",level:2}];function m(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"react-\u7ec4\u4ef6",children:"React \u7ec4\u4ef6"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://zh-hans.reactjs.org/docs/components-and-props.html",children:"\u7ec4\u4ef6 & Props"})}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"\u7ec4\u4ef6\uff0c\u4ece\u6982\u5ff5\u4e0a\u7c7b\u4f3c\u4e8e JavaScript \u51fd\u6570\uff0c\u5b83\u63a5\u53d7\u4efb\u610f\u7684\u2f0a\u53c2\uff08\u5373 \u201cprops\u201d\uff09\uff0c\u5e76\u8fd4\u56de\u2f64\u4e8e\u63cf\u8ff0\u2eda\u2faf\u5c55\u793a\u5185\u5bb9\u7684 React \u5143\u7d20\n\u7ec4\u4ef6\u6709\u4e24\u79cd\u5f62\u5f0f\uff1aClass \u7ec4\u4ef6 \u548c function\u7ec4\u4ef6"}),"\n",(0,o.jsx)(e.h2,{id:"class-\u7ec4\u4ef6",children:"Class \u7ec4\u4ef6"}),"\n",(0,o.jsx)(e.p,{children:"Class \u7ec4\u4ef6\uff0c\u901a\u5e38\u62e5\u6709\u72b6\u6001\u548c\u2f63\u547d\u5468\u671f\uff0c\u7ee7\u627f\u4e8e Component\uff0c\u5b9e\u73b0 render \u2f45\u6cd5"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\n\n// class\u7ec4\u4ef6\u901a\u5e38\u62e5\u6709 \u72b6\u6001\u548c\u2f63\u547d\u5468\u671f\uff0c\u7ee7\u627f\u4e8e Component\uff0c\u5b9e\u73b0 render \u2f45\u6cd5\n\n// \u7ee7\u627f\u4e8e Component\nexport default class ClassComp1 extends Component {\n  constructor(props) {\n    console.log(props, 'props')\n    super(props)\n    // \u5b9a\u4e49\u72b6\u6001\n    this.state = {\n      showTime: new Date()\n    }\n  }\n\n  componentDidMount() {\n    console.log('componentDidMount')\n    this.timer = setInterval(() => {\n      this.setState({\n        showTime: new Date()\n      })\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    console.log('componentWillUnmount')\n    this.timer && clearInterval(this.timer)\n  }\n\n  // \u5b9e\u73b0 render \u2f45\u6cd5\n  render() {\n    const { showTime } = this.state\n    return (\n      <div>\n        <div>ClassComp1</div>\n        <p>{ showTime.toLocaleString() }</p>\n      </div>\n    )\n  }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"function-\u7ec4\u4ef6",children:"Function \u7ec4\u4ef6"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u51fd\u6570\u7ec4\u4ef6\u901a\u5e38\u2f46\u72b6\u6001\uff0c\u4ec5\u5173\u6ce8\u5185\u5bb9\u5c55\u793a\uff0c\u8fd4\u56de\u6e32\u67d3\u7ed3\u679c\u5373\u53ef"}),"\n",(0,o.jsx)(e.li,{children:"\u4eceReact16.8\u5f00\u59cb\u5f15\u2f0a\u4e86 hooks\uff0c\u51fd\u6570\u7ec4\u4ef6\u4e5f\u80fd\u591f\u62e5\u6709\u72b6\u6001"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { useState, useEffect } from 'react'\n\nconst FunComp1 = function() {\n  const [showTime, setShowTime] = useState(new Date())\n  // useEffect Hook \u770b\u505a componentDidMount\u3001componentDidUpdate\u3001componentWillUnmount \u8fd9\u4e09\u4e2a\u51fd\u6570\u7684\u7ec4\u5408\n  useEffect(() => {\n    // \u6570\u636e\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u4f1a\u4ea7\u751f\u591a\u4e2a\u5b9a\u65f6\u5668\uff0c\u9700\u8981\u4f20\u5165 [],\u6267\u884c\u4e00\u6b21\u5373\u53ef\n    const timer = setInterval(() => {\n      setShowTime(new Date())\n    }, 1000)\n    console.log(timer, 'timer--')\n    // \u7ec4\u4ef6\u5378\u8f7d\u6e05\u9664\u5b9a\u65f6\u5668\n    return () => timer && clearInterval(timer)\n  }, [])\n  return (\n    <div>\n      <div>function \u7ec4\u4ef6</div>\n      <p>{ showTime.toLocaleString() }</p>\n    </div>\n  )\n}\n\nexport default FunComp1\n"})}),"\n",(0,o.jsx)(e.h2,{id:"fragments",children:"Fragments"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.a,{href:"https://zh-hans.reactjs.org/docs/fragments.html",children:"Fragments"}),"\n\u5e38\u89c1\u6a21\u5f0f\u662f\u4e00\u4e2a\u7ec4\u4ef6\u8fd4\u56de\u591a\u4e2a\u5143\u7d20\uff0cFragments \u5141\u8bb8\u4f60\u5c06\u5b50\u5217\u8868\u5206\u7ec4\uff0c\u800c\u65e0\u9700\u5411 DOM \u6dfb\u52a0\u989d\u5916\u8282\u70b9\n\u53ef\u4ee5\u4f7f\u7528\u4e00\u79cd\u65b0\u7684\uff0c\u4e14\u66f4\u7b80\u77ed\u7684\u8bed\u6cd5\u6765\u58f0\u660e Fragments\uff0c\u5b83\u770b\u8d77\u6765\u50cf\u7a7a\u6807\u7b7e <\uff0c\u4f46\u4e0d\u652f\u6301 key \u6216\u5c5e\u6027"]}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nclass App extends Component {\n render() {\n  return (\n   <Fragment>\n    <h3>Fragment page</h3>\n    <p>Fragments \u5141\u8bb8\u4f60\u5c06\u5b50\u5217\u8868\u5206\u7ec4\uff0c\u800c\u65e0\u9700\u5411 DOM \u6dfb\u52a0\u989d\u5916\u8282\u70b9</p>\n    <ChildComp></ChildComp>\n   </Fragment>\n  )\n }\n}\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nclass App extends Component {\n render() {\n  return (\n   <>\n    <h3>Fragment page</h3>\n    <p>Fragments \u5141\u8bb8\u4f60\u5c06\u5b50\u5217\u8868\u5206\u7ec4\uff0c\u800c\u65e0\u9700\u5411 DOM \u6dfb\u52a0\u989d\u5916\u8282\u70b9</p>\n    <ChildComp></ChildComp>\n   </>\n  )\n }\n}\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nclass App extends Component {\n constructor(props) {\n  super(props)\n  this.state = {}\n }\n render() {\n  const { list } = this.props\n  return (\n   <dl>\n    {list.map(item => (\n     // key\n     <React.Fragment key={item.id}>\n      <dt>{item.title}</dt>\n      <dd>{item.description}</dd>\n     </React.Fragment>\n    ))}\n   </dl>\n  )\n }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u7ec4\u4ef6\u590d\u5408---composition",children:"\u7ec4\u4ef6\u590d\u5408 - Composition"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://zh-hans.reactjs.org/docs/composition-vs-inheritance.html",children:"\u7ec4\u5408 vs \u7ee7\u627f"})}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"\u590d\u5408\u7ec4\u4ef6\u7ed9\u4e0e\u4f60\u2f9c\u591f\u7684\u654f\u6377\u53bb\u5b9a\u4e49\u2f83\u5b9a\u4e49\u7ec4\u4ef6\u7684\u5916\u89c2\u548c\u2f8f\u4e3a\uff0c\u8fd9\u79cd\u2f45\u5f0f\u66f4\u660e\u786e\u548c\u5b89\u5168\u3002\u5982\u679c\u7ec4\u4ef6\u95f4\u6709\u516c\n\u2f64\u7684\u2faeUI\u903b\u8f91\uff0c\u5c06\u5b83\u4eec\u62bd\u53d6\u4e3aJS\u6a21\u5757\u5bfc\u2f0a\u4f7f\u2f64\u2f7d\u4e0d\u662f\u7ee7\u627f\u5b83"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"yarn create react-app react-app2\ncd react-app2\n// \u517c\u5bb9 react \u964d\u7ea7\nyarn add react@16.12.0 react-dom@16.12.0\nyarn add sass -D\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"// \u76ee\u5f55\u7ed3\u6784\nreact-app2\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 public\n\u2502   \u251c\u2500\u2500 favicon.ico\n\u2502   \u2514\u2500\u2500 index.html\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 App.js\n\u2502   \u251c\u2500\u2500 assets\n\u2502   \u2502   \u2514\u2500\u2500 logo.svg\n\u2502   \u251c\u2500\u2500 components\n\u2502   \u2502   \u251c\u2500\u2500 BottomBar.js\n\u2502   \u2502   \u251c\u2500\u2500 Layout.js\n\u2502   \u2502   \u2514\u2500\u2500 TopBar.js\n\u2502   \u251c\u2500\u2500 index.js\n\u2502   \u251c\u2500\u2500 styles\n\u2502   \u2502   \u2514\u2500\u2500 index.scss\n\u2502   \u2514\u2500\u2500 views\n\u2502       \u251c\u2500\u2500 Home\n\u2502       \u2502   \u2514\u2500\u2500 index.js\n\u2502       \u2514\u2500\u2500 User\n\u2502           \u2514\u2500\u2500 index.js\n\u2514\u2500\u2500 yarn.lock\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/index.js\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport './styles/index.scss'\n\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/App.js\nimport React from 'react'\nimport Home from './views/Home'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Home></Home>\n    </div>\n  );\n}\n\nexport default App;\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/components/TopBar.js\nimport React, { Component } from 'react'\n\nclass TopBar extends Component {\n  render() {\n    return (\n      <div className='top-bar'>\n        TopBar\n      </div>\n    )\n  }\n}\n\nexport default TopBar\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/components/BottomBar.js\nimport React, { Component } from 'react'\nimport Logo from '../assets/logo.svg'\n\nclass BottomBar extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      bottomBarList: [{\n        path: '/home',\n        icon: Logo,\n        selectedIcon: Logo,\n        title: '\u9996\u9875'\n      }, {\n        path: '/user',\n        icon: Logo,\n        selectedIcon: Logo,\n        title: '\u6211\u7684'\n      }]\n    }\n  }\n  render() {\n    return (\n      <ul className='bottom-bar'>\n        {\n          this.state.bottomBarList.map(item =>\n            <li className='bottom-bar-item' key={item.path}>\n              <img src={item.icon} alt=\"\" />\n              <span>{item.title}</span>\n            </li>)\n        }\n      </ul>\n    )\n  }\n}\n\nexport default BottomBar\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/components/Layout.js\nimport React, { Component } from 'react'\nimport TopBar from './TopBar'\nimport BottomBar from './BottomBar'\n\nclass Layout extends Component {\n  componentDidMount() {\n    const { title = 'Shop demo' } = this.props\n    document.title = title\n  }\n  render() {\n    console.log(this)\n    const { children, showtopbar, showbottombar } = this.props\n    return (\n      <div className='layout'>\n        {showtopbar ? <TopBar></TopBar> : ''}\n        <div className='layout-content'>\n          {children.content}\n          {children.text}\n          <button onClick={ children.btnClick }>\u6d4b\u8bd5\u70b9\u51fb</button>\n        </div>\n        {showbottombar ? <BottomBar></BottomBar> : ''}\n      </div>\n    )\n  }\n}\n\nexport default Layout\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/views/Home.js\nimport React, { Component } from 'react'\nimport Layout from '../../components/Layout'\n\nclass Home extends Component {\n  render() {\n    return (\n      <div>\n        <Layout title='home page' showtopbar={true} showbottombar={true}>\n          {/* <div>\n            this is home page\n          </div> */}\n     {/* \u7c7b\u4f3c vue \u7684 slot */}\n          {\n      { content: (\n              <div>\n                this is home page\n              </div> \n            ),\n            text: '\u4e00\u4e2a\u6587\u672c\u5185\u5bb9',\n            btnClick: () => {\n              console.log(this)\n              console.log('btnClick')\n            }}\n     }\n        </Layout>\n      </div>\n    )\n  }\n}\n\nexport default Home\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/views/User.js\nimport React, { Component } from 'react'\nimport Layout from '../../components/Layout'\n\nclass User extends Component {\n  render() {\n    return (\n      <div>\n        <Layout title='User page' showtopbar={true} showbottombar={true}>\n          <div>\n            this is user page\n          </div>\n        </Layout>\n      </div>\n    )\n  }\n}\n\nexport default User\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-css",children:"/* src/styles/index.scss */\n* {\n  padding: 0;\n  margin: 0;\n}\nbody {\n  margin: 0;\n  font-family: -apple-system,'Helvetica Neue',sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\nul,li {\n  list-style: none;\n}\n\n.layout {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100vh;\n  box-sizing: border-box;\n  .top-bar, .bottom-bar {\n    height: 54px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .layout-content {\n    flex: 1;\n    padding: 12px;\n    width: 100%;\n    box-sizing: border-box;\n  }\n  .top-bar {\n    background: #f5f5f5;\n  }\n  .bottom-bar {\n    background: #f5f5f5;\n    justify-content: space-around;\n    .bottom-bar-item {\n      display: flex;\n      flex-direction: column;\n      font-size: 12px;\n      align-items: center;\n      img {\n        width: 32px;\n        height: 32px;\n      }\n    }\n  }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"purecomponent",children:"PureComponent"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://zh-hans.reactjs.org/docs/react-api.html#reactpurecomponent",children:"PureComponent"})}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"React.PureComponent \u4e0e React.Component \u5f88\u76f8\u4f3c,\n\u4e24\u8005\u7684\u533a\u522b\u5728\u4e8e React.Component \u5e76\u672a\u5b9e\u73b0 shouldComponentUpdate()\uff0c\n\u800c React.PureComponent \u4e2d\u4ee5\u6d45\u5c42\u5bf9\u6bd4 prop \u548c state \u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u4e86\u8be5\u51fd\u6570"}),"\n",(0,o.jsx)(e.p,{children:"React.PureComponent \u4e2d\u7684 shouldComponentUpdate() \u4ec5\u4f5c\u5bf9\u8c61\u7684\u6d45\u5c42\u6bd4\u8f83\u3002\n\u5982\u679c\u5bf9\u8c61\u4e2d\u5305\u542b\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5219\u6709\u53ef\u80fd\u56e0\u4e3a\u65e0\u6cd5\u68c0\u67e5\u6df1\u5c42\u7684\u5dee\u522b\uff0c\u4ea7\u751f\u9519\u8bef\u7684\u6bd4\u5bf9\u7ed3\u679c\u3002\n\u4ec5\u5728\u4f60\u7684 props \u548c state \u8f83\u4e3a\u7b80\u5355\u65f6\uff0c\u624d\u4f7f\u7528 React.PureComponent\uff0c\u6216\u8005\u5728\u6df1\u5c42\u6570\u636e\u7ed3\u6784\u53d1\u751f\u53d8\u5316\u65f6\u8c03\u7528 forceUpdate() \u6765\u786e\u4fdd\u7ec4\u4ef6\u88ab\u6b63\u786e\u5730\u66f4\u65b0\u3002\n\u4f60\u4e5f\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 immutable \u5bf9\u8c61\u52a0\u901f\u5d4c\u5957\u6570\u636e\u7684\u6bd4\u8f83\u3002\n\u6b64\u5916\uff0cReact.PureComponent \u4e2d\u7684 shouldComponentUpdate() \u5c06\u8df3\u8fc7\u6240\u6709\u5b50\u7ec4\u4ef6\u6811\u7684 prop \u66f4\u65b0\u3002\u56e0\u6b64\uff0c\u8bf7\u786e\u4fdd\u6240\u6709\u5b50\u7ec4\u4ef6\u4e5f\u90fd\u662f\u201c\u7eaf\u201d\u7684\u7ec4\u4ef6"}),"\n",(0,o.jsx)(e.p,{children:"PureComponentPage \u6709\u4e00\u4e2a\u540d\u4e3a shouldComponentUpdate() \u7684\u65b9\u6cd5\u3002\n\u6269\u5c55 React.PureComponent \u65f6\u4e0d\u5e94\u4f7f\u7528 shouldComponentUpdate\u3002\n\u5982\u679c\u4f7f\u7528 shouldComponentUpdate\uff0c\u8bf7\u6269\u5c55 React.Component"}),"\n",(0,o.jsx)(e.h2,{id:"context",children:"Context"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://zh-hans.reactjs.org/docs/context.html",children:"Context"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://blog.csdn.net/deng1456694385/article/details/98601308",children:"Context/Provider/Consumer\u4f20\u53c2\u4f7f\u7528"})}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"Context \u63d0\u4f9b\u4e86\u4e00\u4e2a\u65e0\u9700\u4e3a\u6bcf\u5c42\u7ec4\u4ef6\u624b\u52a8\u6dfb\u52a0 props\uff0c\u5c31\u80fd\u5728\u7ec4\u4ef6\u6811\u95f4\u8fdb\u884c\u6570\u636e\u4f20\u9012\u7684\u65b9\u6cd5"}),"\n",(0,o.jsx)(e.p,{children:"\u5728 React \u5e94\u7528\u4e2d\uff0c\u6570\u636e\u662f\u901a\u8fc7 props \u5c5e\u6027\u81ea\u4e0a\u800c\u4e0b\uff08\u7531\u7236\u53ca\u5b50\uff09\u8fdb\u884c\u4f20\u9012\u7684\uff0c\n\u4f46\u6b64\u79cd\u7528\u6cd5\u5bf9\u4e8e\u67d0\u4e9b\u7c7b\u578b\u7684\u5c5e\u6027\u800c\u8a00\u662f\u6781\u5176\u7e41\u7410\u7684\uff08\u4f8b\u5982\uff1a\u5730\u533a\u504f\u597d\uff0cUI \u4e3b\u9898\uff09\uff0c\u8fd9\u4e9b\u5c5e\u6027\u662f\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bb8\u591a\u7ec4\u4ef6\u90fd\u9700\u8981\u7684\uff0c\nContext \u63d0\u4f9b\u4e86\u4e00\u79cd\u5728\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u6b64\u7c7b\u503c\u7684\u65b9\u5f0f\uff0c\u800c\u4e0d\u5fc5\u663e\u5f0f\u5730\u901a\u8fc7\u7ec4\u4ef6\u6811\u7684\u9010\u5c42\u4f20\u9012 props"}),"\n",(0,o.jsx)(e.h3,{id:"\u4f55\u65f6\u4f7f\u7528-context",children:"\u4f55\u65f6\u4f7f\u7528 Context"}),"\n",(0,o.jsx)(e.p,{children:"Context \u8bbe\u8ba1\u76ee\u7684\u662f\u4e3a\u4e86\u5171\u4eab\u90a3\u4e9b\u5bf9\u4e8e\u4e00\u4e2a\u7ec4\u4ef6\u6811\u800c\u8a00\u662f\u201c\u5168\u5c40\u201d\u7684\u6570\u636e\uff0c\u4f8b\u5982\u5f53\u524d\u8ba4\u8bc1\u7684\u7528\u6237\u3001\u4e3b\u9898\u6216\u9996\u9009\u8bed\u8a00\uff0c\n\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5728\u4e0b\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a \u201ctheme\u201d \u5c5e\u6027\u624b\u52a8\u8c03\u6574\u4e00\u4e2a\u6309\u94ae\u7ec4\u4ef6\u7684\u6837\u5f0f"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nconst ThemeContext = React.createContext()\n\nclass ContextPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      themeColor: 'orange'\n    }\n  }\n  changeTheme = () => {\n    this.setState({\n      themeColor: 'red'\n    })\n  }\n  render() {\n    return (\n      <ThemeContext.Provider value={ this.state.themeColor }>\n        <ParentComp></ParentComp>\n        <div>\n          <button onClick={ this.changeTheme }>\u4fee\u6539 Provider value\u503c</button>\n        </div>\n      </ThemeContext.Provider>\n    )\n  }\n}\n\nfunction ParentComp() {\n  console.log('ParentComp--')\n  return (\n    <div>\n      <h3>parent componet</h3>\n      <ChildComp></ChildComp>\n    </div>\n  )\n}\n\nclass ChildComp extends Component {\n  static contextType = ThemeContext\n  componentDidMount() {\n    console.log('ChildComp', this)\n  }\n  render() {\n    console.log('render: ChildComp--')\n    return (\n      <div>\n        <h3 style={{color: this.context}}>child component</h3>\n      </div>\n    )\n  }\n}\n\nexport default ContextPage\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u4f7f\u7528-context-\u4e4b\u524d\u7684\u8003\u8651",children:"\u4f7f\u7528 Context \u4e4b\u524d\u7684\u8003\u8651"}),"\n",(0,o.jsx)(e.p,{children:"Context \u4e3b\u8981\u5e94\u7528\u573a\u666f\u5728\u4e8e\u5f88\u591a\u4e0d\u540c\u5c42\u7ea7\u7684\u7ec4\u4ef6\u9700\u8981\u8bbf\u95ee\u540c\u6837\u4e00\u4e9b\u7684\u6570\u636e\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u4f7f\u5f97\u7ec4\u4ef6\u7684\u590d\u7528\u6027\u53d8\u5dee"}),"\n",(0,o.jsx)(e.h3,{id:"context-api",children:"Context Api"}),"\n",(0,o.jsx)(e.h3,{id:"reactcreatecontext",children:"React.createContext"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"const MyContext = React.createContext(defaultValue);\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u521b\u5efa\u4e00\u4e2a Context \u5bf9\u8c61\uff0c\n\u5f53 React \u6e32\u67d3\u4e00\u4e2a\u8ba2\u9605\u4e86\u8fd9\u4e2a Context \u5bf9\u8c61\u7684\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u4f1a\u4ece\u7ec4\u4ef6\u6811\u4e2d\u79bb\u81ea\u8eab\u6700\u8fd1\u7684\u90a3\u4e2a\u5339\u914d\u7684 Provider \u4e2d\u8bfb\u53d6\u5230\u5f53\u524d\u7684 context \u503c\uff0c\n\u53ea\u6709\u5f53\u7ec4\u4ef6\u6240\u5904\u7684\u6811\u4e2d\u6ca1\u6709\u5339\u914d\u5230 Provider \u65f6\uff0c\u5176 defaultValue \u53c2\u6570\u624d\u4f1a\u751f\u6548\uff0c\n\u6b64\u9ed8\u8ba4\u503c\u6709\u52a9\u4e8e\u5728\u4e0d\u4f7f\u7528 Provider \u5305\u88c5\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b\u5bf9\u7ec4\u4ef6\u8fdb\u884c\u6d4b\u8bd5\uff0c\n\u6ce8\u610f\uff1a\u5c06 undefined \u4f20\u9012\u7ed9 Provider \u7684 value \u65f6\uff0c\u6d88\u8d39\u7ec4\u4ef6\u7684 defaultValue \u4e0d\u4f1a\u751f\u6548"}),"\n",(0,o.jsx)(e.h3,{id:"contextprovider",children:"Context.Provider"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"<MyContext.Provider value={ '\u67d0\u4e2a\u503c' }>\n <ParentComp></ParentComp>\n</MyContext.Provider>\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u6bcf\u4e2a Context \u5bf9\u8c61\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a Provider React \u7ec4\u4ef6\uff0c\u5b83\u5141\u8bb8\u6d88\u8d39\u7ec4\u4ef6\u8ba2\u9605 context \u7684\u53d8\u5316\uff0c\nProvider \u63a5\u6536\u4e00\u4e2a value \u5c5e\u6027\uff0c\u4f20\u9012\u7ed9\u6d88\u8d39\u7ec4\u4ef6\uff0c\n\u4e00\u4e2a Provider \u53ef\u4ee5\u548c\u591a\u4e2a\u6d88\u8d39\u7ec4\u4ef6\u6709\u5bf9\u5e94\u5173\u7cfb\n\u591a\u4e2a Provider \u4e5f\u53ef\u4ee5\u5d4c\u5957\u4f7f\u7528\uff0c\u91cc\u5c42\u7684\u4f1a\u8986\u76d6\u5916\u5c42\u7684\u6570\u636e\uff0c"}),"\n",(0,o.jsx)(e.p,{children:"\u5f53 Provider \u7684 value \u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5b83\u5185\u90e8\u7684\u6240\u6709\u6d88\u8d39\u7ec4\u4ef6\u90fd\u4f1a\u91cd\u65b0\u6e32\u67d3\uff0c\n\u4ece Provider \u5230\u5176\u5185\u90e8 consumer \u7ec4\u4ef6\uff08\u5305\u62ec .contextType \u548c useContext\uff09\u7684\u4f20\u64ad\u4e0d\u53d7\u5236\u4e8e shouldComponentUpdate \u51fd\u6570\uff0c\n\u56e0\u6b64\u5f53 consumer \u7ec4\u4ef6\u5728\u5176\u7956\u5148\u7ec4\u4ef6\u8df3\u8fc7\u66f4\u65b0\u7684\u60c5\u51b5\u4e0b\u4e5f\u80fd\u66f4\u65b0"}),"\n",(0,o.jsx)(e.h3,{id:"classcontexttype",children:"Class.contextType"}),"\n",(0,o.jsx)(e.p,{children:"\u6302\u8f7d\u5728 Class \u4e0a\u7684 contextType \u5c5e\u6027\u53ef\u4ee5\u8d4b\u503c\u4e3a\u7531 React.createContext() \u521b\u5efa\u7684 Context \u5bf9\u8c61\uff0c\n\u6b64\u5c5e\u6027\u53ef\u4ee5\u8ba9\u4f60\u4f7f\u7528 this.context \u6765\u83b7\u53d6\u6700\u8fd1 Context \u4e0a\u7684\u503c\uff0c\n\u53ef\u4ee5\u5728\u4efb\u4f55\u751f\u547d\u5468\u671f\u4e2d\u8bbf\u95ee\u5230\u5b83\uff0c\u5305\u62ec render \u51fd\u6570\u4e2d\n\u53ef\u4ee5\u4f7f\u7528 static \u8fd9\u4e2a\u7c7b\u5c5e\u6027\u6765\u521d\u59cb\u5316\u4f60\u7684 contextType"}),"\n",(0,o.jsx)(e.p,{children:"\u5728\u4efb\u4f55\u751f\u547d\u5468\u671f\u4e2d\u8bbf\u95ee\u5230\u5b83\uff0c\u5305\u62ec render \u51fd\u6570\u4e2d"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"class ContextPage extends React.Component {\n // \u5728\u4efb\u4f55\u751f\u547d\u5468\u671f\u4e2d\u8bbf\u95ee\u5230\u5b83\uff0c\u5305\u62ec render \u51fd\u6570\u4e2d\n componentDidMount() {\n  console.log('componentDidMount - context:', this.context)\n }\n componentDidUpdate() {\n  console.log('componentDidUpdate - context:', this.context)\n }\n componentWillUnmount() {\n  console.log('componentWillUnmount - context:', this.context)\n }\n render() {\n  console.log('render - context:', this.context)\n  return (\n   <div>{ this.context }</div>\n  )\n } \n}\nContextPage.context = MyContext \n"})}),"\n",(0,o.jsx)(e.p,{children:"\u4f7f\u7528 static \u8fd9\u4e2a\u7c7b\u5c5e\u6027\u6765\u521d\u59cb\u5316\u4f60\u7684 contextType"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"class ContextPage extends React.Component {\n // \u4f7f\u7528 static \u8fd9\u4e2a\u7c7b\u5c5e\u6027\u6765\u521d\u59cb\u5316\u4f60\u7684 contextType\n static contextType = MyContext\n componentDidMount() {\n  console.log('componentDidMount - context:', this.context)\n }\n componentDidUpdate() {\n  console.log('componentDidUpdate - context:', this.context)\n }\n componentWillUnmount() {\n  console.log('componentWillUnmount - context:', this.context)\n }\n render() {\n  console.log('render - context:', this.context)\n  return (\n   <div>{ this.context }</div>\n  )\n } \n} \n"})}),"\n",(0,o.jsx)(e.h3,{id:"contextconsumer",children:"Context.Consumer"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// \u8bed\u6cd5\n<MyContext.Consumer>\n  {value => /* \u57fa\u4e8e context \u503c\u8fdb\u884c\u6e32\u67d3*/}\n</MyContext.Consumer>\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u4e00\u4e2a React \u7ec4\u4ef6\u53ef\u4ee5\u8ba2\u9605 context \u7684\u53d8\u66f4\uff0c\u6b64\u7ec4\u4ef6\u53ef\u4ee5\u5728\u51fd\u6570\u5f0f\u7ec4\u4ef6\u4e2d\u8ba2\u9605 context\n\u8be5\u65b9\u6cd5\u9700\u8981\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u5b50\u5143\u7d20\uff08function as a child\uff09\uff0c\n\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u5f53\u524d\u7684 context \u503c\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a React \u8282\u70b9\uff0c\n\u4f20\u9012\u7ed9\u51fd\u6570\u7684 value \u503c\u7b49\u4ef7\u4e8e\u7ec4\u4ef6\u6811\u4e0a\u65b9\u79bb\u8fd9\u4e2a context \u6700\u8fd1\u7684 Provider \u63d0\u4f9b\u7684 value \u503c\uff0c\n\u5982\u679c\u6ca1\u6709\u5bf9\u5e94\u7684 Provider\uff0cvalue \u53c2\u6570\u7b49\u540c\u4e8e\u4f20\u9012\u7ed9 createContext() \u7684 defaultValue"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"class IscButton extends Component {\n  render() {\n    return (\n      <ThemeContext.Consumer>\n        { theme => <button style={{\n          background: theme,\n          border: `1px solid ${theme}`,\n          color: '#fff',\n          padding: '6px',\n          borderRadius: '4px'\n        }}>ThemeContext Consumer</button> }\n      </ThemeContext.Consumer>\n    )\n  }  \n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"contextdisplayname",children:"Context.displayName"}),"\n",(0,o.jsx)(e.p,{children:"context \u5bf9\u8c61\u63a5\u53d7\u4e00\u4e2a\u540d\u4e3a displayName \u7684 property\uff0c\u7c7b\u578b\u4e3a\u5b57\u7b26\u4e32,\nReact DevTools \u4f7f\u7528\u8be5\u5b57\u7b26\u4e32\u6765\u786e\u5b9a context \u8981\u663e\u793a\u7684\u5185\u5bb9"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nconst ThemeContext = React.createContext()\n\n// Context.displayName\nThemeContext.displayName = 'themeContextDisplayName'\n...\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u52a8\u6001-context",children:"\u52a8\u6001 Context"}),"\n",(0,o.jsx)(e.p,{children:"\u5728 \u9879\u76ee\u76ee\u5f55/src/context \u4e0b\uff0c\u65b0\u5efa ThemeContext.js"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/context/ThemeContext.js\nimport React from 'react'\nexport const themes = {\n light: {\n  color: '#fff',\n  background: 'orange'\n },\n dark: {\n  color: '#fff',\n  background: '#000'\n }\n}\nexport const ThemeContext = React.createContext(themes.light)\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u65b0\u5efa ContextDynamicPage.js \u9875\u9762"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nimport { ThemeContext, themes } from '../context/ThemeContext'\n\n// react devtool\nThemeContext.displayName = 'ThemeContext-ContextDynamicPage'\n\n// \u52a8\u6001 Context \u9875\u9762\nclass ContextDynamicPage extends Component {\n  static contextType = ThemeContext\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      theme: themes.light\n    }\n  }\n \n // \u5207\u6362\u4e3b\u9898\n  toggleTheme = () => {\n    // setState \u4f7f\u7528\u51fd\u6570\uff0c\u63a5\u53d7\u4e0a\u4e00\u6b21\u7684 state,\u8fdb\u884c\u6bd4\u8f83\n    this.setState(state =>({\n      theme: state.theme === themes.dark? themes.light : themes.dark\n    }))\n  }\n\n  render() {\n    console.log('ContextDynamicPage-render')\n    return (\n      <ThemeContext.Provider value={ this.state.theme }>\n        <h3>ContextDynamicPage</h3>\n        <div>\n          <button style={ this.state.theme } onClick={ this.toggleTheme }>\u4fee\u6539\u4e3b\u9898</button>\n        </div>\n        <ParentComp></ParentComp>\n      </ThemeContext.Provider>\n    )\n  }\n}\n\n// \u4e2d\u95f4\u7ec4\u4ef6\nfunction ParentComp () {\n  console.log('ParentComp-render')\n  return (\n    <div>\n      <h4>ParentComp</h4>\n      <ChildComp></ChildComp>\n    </div>\n  )\n}\n\n// \u5b50\u7ec4\u4ef6\nclass ChildComp extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      message: `\n      \u4e00\u4e2a React \u7ec4\u4ef6\u53ef\u4ee5\u8ba2\u9605 context \u7684\u53d8\u66f4\uff0c\u6b64\u7ec4\u4ef6\u53ef\u4ee5\u8ba9\u4f60\u5728\u51fd\u6570\u5f0f\u7ec4\u4ef6\u4e2d\u53ef\u4ee5\u8ba2\u9605 context,\n      \u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u5b50\u5143\u7d20\uff08function as a child,\n      \u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u5f53\u524d\u7684 context \u503c\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a React \u8282\u70b9,\n      \u4f20\u9012\u7ed9\u51fd\u6570\u7684 value \u503c\u7b49\u4ef7\u4e8e\u7ec4\u4ef6\u6811\u4e0a\u65b9\u79bb\u8fd9\u4e2a context \u6700\u8fd1\u7684 Provider \u63d0\u4f9b\u7684 value \u503c,\n      \u5982\u679c\u6ca1\u6709\u5bf9\u5e94\u7684 Provider\uff0cvalue \u53c2\u6570\u7b49\u540c\u4e8e\u4f20\u9012\u7ed9 createContext() \u7684 defaultValue\n      `\n    }\n  }\n  render() {\n    console.log('ChildComp-render')\n    const { message } = this.state\n    return (\n      <ThemeContext.Consumer>\n        { theme => (\n          <Fragment>\n            <h5 style={{ color: theme.background }}>ParentComp</h5>\n            <p style={ theme }>{ message }</p>\n          </Fragment>\n        ) }\n      </ThemeContext.Consumer>\n    )\n  }\n}\n\nexport default ContextDynamicPage\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u5728\u5d4c\u5957\u7ec4\u4ef6\u4e2d\u66f4\u65b0-context",children:"\u5728\u5d4c\u5957\u7ec4\u4ef6\u4e2d\u66f4\u65b0 Context"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/context/ThemeContext2.js\nimport React from \"react\"\n\nexport const themes = {\n  light: {\n    color: '#fff',\n    background: 'orange'\n  },\n  dark: {\n    color: '#fff',\n    background: '#000'\n  }\n}\n\nexport const ThemeContext2 = React.createContext({\n  theme: themes.dark,\n  changeTheme: () => {}\n})\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// src/views/ContextConsumerUpdatePage.js\nimport React, { Component, Fragment } from 'react'\nimport { ThemeContext2, themes } from '../context/themeContext2'\nThemeContext2.displayName = 'ThemeContext2-ContextDynamicPage'\n\n// \u5728\u5d4c\u5957\u7ec4\u4ef6\u4e2d\u66f4\u65b0 Context\nclass ContextConsumerUpdatePage extends Component {\n  static contextType = ThemeContext2\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      theme: themes.light,\n      changeTheme: this.changeTheme\n    }\n  }\n\n  changeTheme = () => {\n    // setState \u4f7f\u7528\u51fd\u6570\uff0c\u63a5\u53d7\u4e0a\u4e00\u6b21\u7684 state,\u8fdb\u884c\u6bd4\u8f83\n    this.setState(state => ({\n      theme: state.theme === themes.dark ? themes.light : themes.dark\n    }))\n  }\n\n  render() {\n    console.log('ContextDynamicPage-render')\n    return (\n      // \u5c06\u6574\u4e2a\u7684 state \u4f20\u9012\u7ed9 Provider \u7684 value\n      <ThemeContext2.Provider value={this.state}>\n        <h3>ContextConsumerUpdatePage - \u5728\u5d4c\u5957\u7ec4\u4ef6\u4e2d\u66f4\u65b0 Context</h3>\n        <div>\n          <button style={this.state.theme} onClick={this.changeTheme}>\u4fee\u6539\u4e3b\u9898</button>\n        </div>\n        <ParentComp></ParentComp>\n      </ThemeContext2.Provider>\n    )\n  }\n}\n\n// \u4e2d\u95f4\u7ec4\u4ef6\nfunction ParentComp() {\n  console.log('ParentComp-render')\n  return (\n    <div>\n      <h4>ParentComp</h4>\n      <ChildComp></ChildComp>\n    </div>\n  )\n}\n\n// \u5b50\u7ec4\u4ef6\nclass ChildComp extends Component {\n  static contextType = ThemeContext2\n  constructor(props) {\n    super(props)\n    this.state = {\n      message: `\n      \u4e00\u4e2a React \u7ec4\u4ef6\u53ef\u4ee5\u8ba2\u9605 context \u7684\u53d8\u66f4\uff0c\u6b64\u7ec4\u4ef6\u53ef\u4ee5\u8ba9\u4f60\u5728\u51fd\u6570\u5f0f\u7ec4\u4ef6\u4e2d\u53ef\u4ee5\u8ba2\u9605 context,\n      \u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u5b50\u5143\u7d20\uff08function as a child,\n      \u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u5f53\u524d\u7684 context \u503c\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a React \u8282\u70b9,\n      \u4f20\u9012\u7ed9\u51fd\u6570\u7684 value \u503c\u7b49\u4ef7\u4e8e\u7ec4\u4ef6\u6811\u4e0a\u65b9\u79bb\u8fd9\u4e2a context \u6700\u8fd1\u7684 Provider \u63d0\u4f9b\u7684 value \u503c,\n      \u5982\u679c\u6ca1\u6709\u5bf9\u5e94\u7684 Provider\uff0cvalue \u53c2\u6570\u7b49\u540c\u4e8e\u4f20\u9012\u7ed9 createContext() \u7684 defaultValue\n      `\n    }\n  }\n  render() {\n    console.log('ChildComp-render')\n    console.log(this.context, 'context--')\n    const { message } = this.state\n    return (\n      <Fragment>\n        <h5>ChildComp-\u5b50\u7ec4\u4ef6</h5>\n        <p style={this.context.theme}>{message}</p>\n        <IscButton>\n          \u5d4c\u5957\u7ec4\u4ef6\u4e2d\u4fee\u6539 Context\n        </IscButton>\n      </Fragment>\n    )\n  }\n}\n\n// \u6309\u94ae\u7ec4\u4ef6\nclass IscButton extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n  render() {\n    console.log('IscButton - render')\n    console.log(this.props)\n    return (\n      <ThemeContext2.Consumer>\n        {({ theme, changeTheme }) => (\n          <button style={theme} onClick={changeTheme}>\n            {this.props.children}\n          </button>\n        )}\n      </ThemeContext2.Consumer>\n    )\n  }\n}\n\nexport default ContextConsumerUpdatePage\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u591a\u4e2a-context",children:"\u591a\u4e2a Context"}),"\n",(0,o.jsx)(e.p,{children:"\u5982\u679c\u4e24\u4e2a\u6216\u8005\u66f4\u591a\u7684 context \u503c\u7ecf\u5e38\u88ab\u4e00\u8d77\u4f7f\u7528\uff0c\u90a3\u4f60\u53ef\u80fd\u8981\u8003\u8651\u4e00\u4e0b\u53e6\u5916\u521b\u5efa\u4f60\u81ea\u5df1\u7684\u6e32\u67d3\u7ec4\u4ef6\uff0c\u4ee5\u63d0\u4f9b\u8fd9\u4e9b\u503c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nimport { ThemeContext, themes } from '../context/themeContext'\nimport { UserContext } from '../context/userContext'\n\nclass ContextMultiplePage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      theme: themes.dark,\n      userinfo: {\n        username: 'sunsboyxu',\n        country: 'China'\n      }\n    }\n  }\n\n  render() {\n    return (\n      <ThemeContext.Provider value={ this.state.theme }>\n        <UserContext.Provider value={ this.state.userinfo }>\n          <ParentComp></ParentComp>\n        </UserContext.Provider>\n      </ThemeContext.Provider>\n    )\n  }\n}\n\nfunction ParentComp() {\n  return (\n    <div className='parent-comp'>\n      <ChildComp></ChildComp>  \n    </div>\n  )\n}\n\nclass ChildComp extends Component {\n  render() {\n    return (\n      <ThemeContext.Consumer>\n        { theme => (\n          <UserContext.Consumer>\n            { userinfo => (\n              <UserInfo theme={theme} userinfo={ userinfo }></UserInfo>\n            ) }\n          </UserContext.Consumer>\n        ) }\n      </ThemeContext.Consumer>\n    )\n  }\n}\n\nclass UserInfo extends Component {\n  render() {\n    const { theme, userinfo } = this.props\n    return (\n      <div style={theme}>\n        <h3>{ userinfo.username }</h3>\n        <p>{ userinfo.country }</p>\n      </div>\n    )\n  }\n}\n\nexport default ContextMultiplePage\n"})}),"\n",(0,o.jsx)(e.h3,{id:"context-\u6ce8\u610f\u4e8b\u9879",children:"Context \u6ce8\u610f\u4e8b\u9879"}),"\n",(0,o.jsx)(e.p,{children:"\u56e0\u4e3a context \u4f1a\u6839\u636e\u5f15\u7528\u6807\u8bc6\u6765\u51b3\u5b9a\u4f55\u65f6\u8fdb\u884c\u6e32\u67d3\uff08\u672c\u8d28\u4e0a\u662f value \u5c5e\u6027\u503c\u7684\u6d45\u6bd4\u8f83\uff09\uff0c\n\u6240\u4ee5\u8fd9\u91cc\u53ef\u80fd\u5b58\u5728\u4e00\u4e9b\u9677\u9631\uff0c\u5f53 provider \u7684\u7236\u7ec4\u4ef6\u8fdb\u884c\u91cd\u6e32\u67d3\u65f6\uff0c\u53ef\u80fd\u4f1a\u5728 consumers \u7ec4\u4ef6\u4e2d\u89e6\u53d1\u610f\u5916\u7684\u6e32\u67d3"}),"\n",(0,o.jsx)(e.p,{children:"\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53\u6bcf\u4e00\u6b21 Provider \u91cd\u6e32\u67d3\u65f6\uff0c\u7531\u4e8e value \u5c5e\u6027\u603b\u662f\u88ab\u8d4b\u503c\u4e3a\u65b0\u7684\u5bf9\u8c61\uff0c\u4ee5\u4e0b\u7684\u4ee3\u7801\u4f1a\u91cd\u65b0\u6e32\u67d3\u4e0b\u9762\u6240\u6709\u7684 consumers \u7ec4\u4ef6"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"class App extends React.Component {\n  render() {\n    return (\n      <MyContext.Provider value={{username: 'sunsboyxu'}}>\n        <Toolbar />\n      </MyContext.Provider>\n    );\n  }\n}\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u4e3a\u4e86\u9632\u6b62\u8fd9\u79cd\u60c5\u51b5\uff0c\u5c06 value \u72b6\u6001\u63d0\u5347\u5230\u7236\u8282\u70b9\u7684 state \u91cc"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userinfo: {username: 'sunsboyxu'},\n    };\n  }\n\n  render() {\n    return (\n      <MyContext.Provider value={this.state.userinfo}>\n        <Toolbar />\n      </MyContext.Provider>\n    );\n  }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"createportal",children:"createPortal"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// \u8bed\u6cd5\ncreatePortal(child, container)\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5f39\u7a97\u7c7b\u7ec4\u4ef6\u5b9e\u73b0\uff0c\u6dfb\u52a0\u5982 body \u540e\uff0c\u4f9d\u8d56 react-dom \u5e93"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react';\nimport { createPortal } from 'react-dom'\n\nclass Dialog extends Component {\n  constructor(props) {\n    super(props)\n    this.node = document.createElement('div')\n    document.body.appendChild(this.node)\n  }\n\n  componentWillUnmount() {\n    // \u6e05\u9664\u4e0a\u4e00\u6b21\u751f\u6210\u7684\n    if(this.node) {\n      document.body.removeChild(this.node)\n    }\n  }\n\n  render() {\n    return createPortal(\n      <div className='dialog' style={{ width: '100px', height: '100px', 'background': 'orange' }}>\n        this is dialog\n      </div>,\n      this.node\n    )\n  }\n}\n\nexport default Dialog;\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u9ad8\u9636\u7ec4\u4ef6-hoc",children:"\u9ad8\u9636\u7ec4\u4ef6-HOC"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://zh-hans.reactjs.org/docs/higher-order-components.html",children:"\u9ad8\u9636\u7ec4\u4ef6-HOC"})}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"\u4e3a\u4e86\u63d0\u9ad8\u7ec4\u4ef6\u590d\u7528\u7387\uff0c\u53ef\u6d4b\u8bd5\u6027\uff0c\u5c31\u8981\u4fdd\u8bc1\u7ec4\u4ef6\u529f\u80fd\u5355\u4e00\u6027\uff0c\u4f46\u662f\u82e5\u8981\u6ee1\u8db3\u590d\u6742\u9700\u6c42\u5c31\u8981\u6269\u5c55\u529f\u80fd\u5355\u4e00\u7684\u7ec4\u4ef6\uff0c\n\u9ad8\u9636\u7ec4\u4ef6 HOC\uff08Higher-Order Component\uff09\uff0c\u662f React \u4e2d\u7528\u4e8e\u590d\u7528\u7ec4\u4ef6\u903b\u8f91\u7684\u4e00\u79cd\u9ad8\u7ea7\u6280\u5de7\uff0c\nHOC\uff0c\u81ea\u8eab\u4e0d\u662f React API \u7684\u4e00\u90e8\u5206\uff0c\u5b83\u662f\u4e00\u79cd\u57fa\u4e8e React \u7684\u7ec4\u5408\u7279\u6027\u800c\u5f62\u6210\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c"}),"\n",(0,o.jsx)(e.p,{children:"HOC \u662f\u53c2\u6570\u4e3a \u7ec4\u4ef6\uff0c\u8fd4\u56de\u503c\u4e3a \u65b0\u7ec4\u4ef6\u7684\u51fd\u6570\uff0c"}),"\n",(0,o.jsx)(e.p,{children:"HOC \u4e0d\u4f1a\u4fee\u6539\u4f20\u5165\u7684\u7ec4\u4ef6\uff0c\u4e5f\u4e0d\u4f1a\u4f7f\u7528\u7ee7\u627f\u6765\u590d\u5236\u5176\u884c\u4e3a\uff0c\n\u76f8\u53cd\uff0cHOC \u901a\u8fc7\u5c06\u7ec4\u4ef6\u5305\u88c5\u5728\u5bb9\u5668\u7ec4\u4ef6\u4e2d\u6765\u7ec4\u6210\u65b0\u7ec4\u4ef6\uff0cHOC \u662f\u7eaf\u51fd\u6570\uff0c\u6ca1\u6709\u526f\u4f5c\u7528"}),"\n",(0,o.jsx)(e.p,{children:"\u7ec4\u4ef6\u662f\u5c06 props \u8f6c\u6362\u4e3a UI\uff0c\u800c \u9ad8\u9636\u7ec4\u4ef6 HOC \u662f\u5c06\u7ec4\u4ef6\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u7ec4\u4ef6\uff0cHOC \u5728 React \u7684\u7b2c\u4e09\u65b9\u5e93\u4e2d\u5f88\u5e38\u89c1\uff0c\n\u4f8b\u5982\uff1aRedux \u7684 connect \u548c Relay \u7684 createFragmentContainer"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\n\n// HOC \u7ec4\u4ef6\nconst foot = (Comp) => props => {\n  return (\n    <div className='border'>\n      <Comp {...props}></Comp>\n    </div>\n  )\n} \n\n// \u53ef\u590d\u7528 \u5b50\u7ec4\u4ef6\nfunction ChildComp(props) {\n  return (\n    <div>Child comp</div>\n  )\n}\n\nconst Foot = foot(ChildComp)\nconst Foot2 = foot(foot(ChildComp))\n\n// \u9875\u9762\nclass HocCompPage1 extends Component {\n  render() {\n    return (\n      <div>\n        <h3>\u9ad8\u9636\u7ec4\u4ef6-Hoc</h3>\n        <Foot></Foot>\n        <Foot2></Foot2>\n      </div>\n    )\n  }\n}\n\nexport default HocCompPage1\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u672a\u4f7f\u7528 \u9ad8\u9636\u7ec4\u4ef6 HOC \u5904\u7406\u7684\u9875\u9762"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\n\n// \u9ad8\u9636\u7ec4\u4ef6\u9875\u9762\nclass HocCompPage2 extends Component {\n  render() {\n    return (\n      <div>\n        <CommentList></CommentList>\n        <BlogList></BlogList>\n      </div>\n    )\n  }\n}\n\n// \u8bc4\u8bba\u5217\u8868\nclass CommentList extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      list: []\n    }\n  }\n  getList = () => {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve([{\n          title: '\u6807\u98981',\n          content: '\u8bc4\u8bba\u5185\u5bb91'\n        }, {\n          title: '\u6807\u98982',\n          content: '\u8bc4\u8bba\u5185\u5bb92'\n        }])\n      }, 1500)\n    })\n  }\n\n  componentDidMount() {\n    this.getList().then(res => {\n      this.setState({\n        list: res\n      })\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        {\n          this.state.list.map(item => <CommentItem item={item} key={item.title}></CommentItem>)\n        }\n      </div>\n    )\n  }\n}\n\nfunction CommentItem(props) {\n  const { item } = props\n  return (\n    <div>\n      <h3>{item.title}</h3>\n      <p>{item.content}</p>\n    </div>\n  )\n}\n\n// \u535a\u5ba2\u5217\u8868\nclass BlogList extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      list: []\n    }\n  }\n  getList = () => {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve([{\n          title: '\u535a\u5ba21',\n          content: '\u535a\u5ba2\u5185\u5bb91'\n        }, {\n          title: '\u535a\u5ba22',\n          content: '\u535a\u5ba2\u5185\u5bb92'\n        }])\n      }, 1500)\n    })\n  }\n\n  componentDidMount() {\n    this.getList().then(res => {\n      this.setState({\n        list: res\n      })\n    })\n  }\n  render() {\n    return (\n      <div>\n        {\n          this.state.list.map(item => <BlogItem item={item} key={item.title}></BlogItem>)\n        }\n      </div>\n    )\n  }\n}\n\nfunction BlogItem(props) {\n  const { item } = props\n  return (\n    <div>\n      <h3>{item.title}</h3>\n      <p>{item.content}</p>\n    </div>\n  )\n}\n\nexport default HocCompPage2\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u4f7f\u7528 \u9ad8\u9636\u7ec4\u4ef6 HOC \u5904\u7406\u7684\u9875\u9762"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\n\n// \u8bc4\u8bba\u5217\u8868 - CommentList\nfunction CommentList(props) {\n  const list = props.list\n  return (\n    // Fragment \u7b80\u5199\n    <>\n      <h3>\u8bc4\u8bba\u5217\u8868</h3>\n      {\n        list.length === 0 ? <LoadingComp /> :\n          <div style={{ border: '1px solid red', padding: '10px' }}>\n            {list.map(item => <CommentItem item={item} key={item.title} />)}\n          </div>\n      }\n    </>\n  )\n}\n\n// \u663e\u793a\u6570\u636e\u52a0\u8f7d\nfunction LoadingComp(props) {\n  return <div style={{\n    minHeight: '100px',\n    display: 'flex',\n    alignItems: 'center',\n    color: '#666',\n    fontSize: '12px',\n    justifyContent: 'center'\n  }}>\n    { props.children || '\u6b63\u5728\u52a0\u8f7d\u6570\u636e...' }\n  </div>\n}\n\n// \u8bc4\u8bba item - CommentItem\nfunction CommentItem(props) {\n  const { item } = props\n  return (\n    <div className='list-item'>\n      <h4>{item.title}</h4>\n      <p>{item.content}</p>\n    </div>\n  )\n}\n\n// \u535a\u5ba2\u5217\u8868 - BlogList\nfunction BlogList(props) {\n  const list = props.list\n  return (\n    // Fragment \u7b80\u5199\n    <>\n      <h3>\u535a\u5ba2\u5217\u8868</h3>\n      {\n        list.length === 0 ? <LoadingComp>\u6b63\u5728\u52a0\u8f7d\u535a\u5ba2\u6570\u636e...</LoadingComp> :\n          <div style={{ border: '1px solid orange', padding: '10px' }}>\n            {list.map(item => <BlogItem item={item} key={item.title} />)}\n          </div>\n      }\n    </>\n  )\n}\n\n// \u535a\u5ba2 item - BlogItem\nfunction BlogItem(props) {\n  const item = props.item\n  return (\n    <div className='list-item'>\n      <h3>{item.title}</h3>\n      <p>{item.content}</p>\n    </div>\n  )\n}\n\n// \u9ad8\u9636\u7ec4\u4ef6 Hoc - hocList\nfunction hocList(WrapComp, getList) {\n  return class extends Component {\n    constructor(props) {\n      super(props)\n      this.state = {\n        list: []\n      }\n    }\n    componentDidMount() {\n      getList().then(res => {\n        this.setState({\n          list: res\n        })\n      })\n    }\n    render() {\n      console.log('render--')\n      return <WrapComp {...this.props} list={this.state.list} />\n    }\n  }\n}\n\n\nconst CommentListHoc = hocList(CommentList, () => {\n  return new Promise((resolve, reject) => {\n    // \u6a21\u62df\u540e\u7aef\u8fd4\u56de\u6570\u636e\n    setTimeout(() => {\n      resolve([{\n        title: '\u6807\u98981',\n        content: '\u8bc4\u8bba\u5185\u5bb91'\n      }, {\n        title: '\u6807\u98982',\n        content: '\u8bc4\u8bba\u5185\u5bb92'\n      }])\n    }, 1500)\n  })\n})\n\nconst BlogListHoc = hocList(BlogList, () => {\n  return new Promise((resolve, reject) => {\n    // \u6a21\u62df\u540e\u7aef\u8fd4\u56de\u6570\u636e\n    setTimeout(() => {\n      resolve([{\n        title: '\u535a\u5ba21',\n        content: '\u535a\u5ba2\u5185\u5bb91'\n      }, {\n        title: '\u535a\u5ba22',\n        content: '\u535a\u5ba2\u5185\u5bb92'\n      }])\n    }, 3000)\n  })\n})\n\n// HocCompPage3 \u9875\u9762\nclass HocCompPage3 extends Component {\n  render() {\n    return (\n      <div style={{ padding: '12px' }}>\n        <CommentListHoc />\n        <BlogListHoc />\n      </div>\n    )\n  }\n}\n\nexport default HocCompPage3\n"})})]})}function d(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(m,{...n})}):m(n)}},1377:(n,e,t)=>{t.d(e,{R:()=>c,x:()=>i});var o=t(9474);const s={},r=o.createContext(s);function c(n){const e=o.useContext(r);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:c(n.components),o.createElement(r.Provider,{value:e},n.children)}}}]);