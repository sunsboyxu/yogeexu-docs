"use strict";(self.webpackChunksunsboyxu_docs=self.webpackChunksunsboyxu_docs||[]).push([[3569],{7460:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>i});var o=t(3274),s=t(1377);const r={},a="React-redux",c={id:"webs/react/React-redux",title:"React-redux",description:"- react-redux",source:"@site/docs/webs/react/6-React-redux.md",sourceDirName:"webs/react",slug:"/webs/react/React-redux",permalink:"/yogeexu-docs/webs/react/React-redux",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Redux",permalink:"/yogeexu-docs/webs/react/Redux"},next:{title:"React-router",permalink:"/yogeexu-docs/webs/react/React-router"}},d={},i=[{value:"React-redux \u63d0\u4f9b\u4e862\u4e2a api",id:"react-redux-\u63d0\u4f9b\u4e862\u4e2a-api",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"mapStateToProps \u5c06 state \u6620\u5c04\u5230 props",id:"mapstatetoprops-\u5c06-state-\u6620\u5c04\u5230-props",level:2},{value:"\u591a\u4e2a dispatch \u65b9\u6cd5\uff0c\u81ea\u5b9a\u4e49 \u6620\u5c04\u65b9\u6cd5",id:"\u591a\u4e2a-dispatch-\u65b9\u6cd5\u81ea\u5b9a\u4e49-\u6620\u5c04\u65b9\u6cd5",level:2}];function p(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"react-redux",children:"React-redux"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://www.redux.org.cn/docs/react-redux/",children:"react-redux"})}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"react-redux-\u63d0\u4f9b\u4e862\u4e2a-api",children:"React-redux \u63d0\u4f9b\u4e862\u4e2a api"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Provider \u4e3a\u540e\u4ee3\u7ec4\u4ef6\u63d0\u4f9bstore"}),"\n",(0,o.jsx)(e.li,{children:"connect \u4e3a\u7ec4\u4ef6\u63d0\u4f9b\u6570\u636e\u548c\u53d8\u66f4\u2f45\u6cd5"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"yarn add react-redux\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-md",children:" react-app2\n \u251c\u2500\u2500 README.md\n \u251c\u2500\u2500 package.json\n \u251c\u2500\u2500 public\n \u2502   \u251c\u2500\u2500 favicon.ico\n \u2502   \u2514\u2500\u2500 index.html\n \u251c\u2500\u2500 src\n \u2502   \u251c\u2500\u2500 App.js\n \u2502   \u251c\u2500\u2500 assets\n \u2502   \u2502   \u2514\u2500\u2500 logo.svg\n \u2502   \u251c\u2500\u2500 components\n \u2502   \u2502   \u251c\u2500\u2500 BottomBar.js\n \u2502   \u2502   \u251c\u2500\u2500 Layout.js\n \u2502   \u2502   \u2514\u2500\u2500 TopBar.js\n \u2502   \u251c\u2500\u2500 index.js\n \u2502   \u251c\u2500\u2500 store\n \u2502   \u2502   \u2514\u2500\u2500 index.js\n \u2502   \u251c\u2500\u2500 styles\n \u2502   \u2502   \u2514\u2500\u2500 index.scss\n \u2502   \u2514\u2500\u2500 views\n \u2502       \u251c\u2500\u2500 Cart\n \u2502       \u2502   \u2514\u2500\u2500 index.js\n \u2502       \u251c\u2500\u2500 Home\n \u2502       \u2502   \u2514\u2500\u2500 index.js\n \u2502       \u2514\u2500\u2500 User\n \u2502           \u2514\u2500\u2500 index.js\n \u2514\u2500\u2500 yarn.lock\n"})}),"\n",(0,o.jsx)(e.h2,{id:"mapstatetoprops-\u5c06-state-\u6620\u5c04\u5230-props",children:"mapStateToProps \u5c06 state \u6620\u5c04\u5230 props"}),"\n",(0,o.jsx)(e.p,{children:"\u5728 src/views/Cart.js \u9875\u9762\u4f7f\u7528 react-redux connect"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nimport Layout from '../../components/Layout'\nimport { connect } from 'react-redux'\n\n// \u5199\u6cd5\u4e00\nexport default connect(\n  // mapStateToProps \u5c06 state \u6620\u5c04\u5230 props \u4e0a\n  state => ({ count: state })\n)(\n  class Cart extends Component {\n\n    add1 = () => {\n      this.props.dispatch({type: 'ADD'})\n    }\n\n    add2 = (dispatch) => {\n      console.log(this)\n      dispatch({ type: 'ADD' })\n    }\n\n    render() {\n      console.log('props:', this.props)\n      const { count, dispatch } = this.props\n      return (\n        <Layout>\n          <h3>Cart page</h3>\n          <p>\u8d2d\u7269\u8f66\u6570\u91cf\uff1a{count}</p>\n          <div>\n            {/* <button onClick={ this.add(dispatch)  }>\u52a0\u5165\u8d2d\u7269\u8f66</button> \u8fd9\u6837\u5199\u4f1a\u62a5\u9519*/}\n            <button onClick={ this.add1 }>\u52a0\u5165\u8d2d\u7269\u8f661</button>\n            <button onClick={() => this.add2(dispatch)}>\u52a0\u5165\u8d2d\u7269\u8f662</button>\n            <button onClick={() => dispatch({ type: 'MINUS' })}>\u79fb\u9664\u8d2d\u7269\u8f66</button>\n          </div>\n        </Layout>\n      )\n    }\n  }\n)\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u591a\u4e2a-dispatch-\u65b9\u6cd5\u81ea\u5b9a\u4e49-\u6620\u5c04\u65b9\u6cd5",children:"\u591a\u4e2a dispatch \u65b9\u6cd5\uff0c\u81ea\u5b9a\u4e49 \u6620\u5c04\u65b9\u6cd5"}),"\n",(0,o.jsx)(e.p,{children:"\u5728 src/views/User.js \u9875\u9762\u4f7f\u7528 react-redux connect"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nimport Layout from '../../components/Layout'\nimport { connect } from 'react-redux'\n\nexport default connect(\n  // mapStateToProps\n  state => ({count: state}),\n  // \u591a\u4e2a dispatch \u65b9\u6cd5\uff0c\u81ea\u5b9a\u4e49 \u6620\u5c04\u65b9\u6cd5\n  {\n    add: () => ({ type: 'ADD' }),\n    minus: () => ({ type: 'MINUS' }) \n  })(\n  class User extends Component {\n    render() {\n      const { count, add, minus} = this.props\n      return (\n        <Layout title='User Page' showtopbar={true} showbottombar={true}>\n          <h3>User page</h3>\n          <p>\u8d2d\u7269\u8f66\u6570\u91cf\uff1a{ count }</p>\n          <div>\n            <button onClick={ add }>\u52a0\u5165\u8d2d\u7269\u8f66</button>\n            <button onClick={ minus }>\u79fb\u9664\u8d2d\u7269\u8f66</button>\n          </div>\n        </Layout>\n      )\n    }\n  }\n)\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"import React, { Component } from 'react'\nimport Layout from '../../components/Layout'\nimport { connect } from 'react-redux'\n\nclass User extends Component {\n  render() {\n    console.log('props', this.props)\n    const { count, add, minus } = this.props\n    return (\n      <Layout title='User Page' showtopbar={true} showbottombar={true}>\n        <h3>User page</h3>\n        <p>\u8d2d\u7269\u8f66\u6570\u91cf\uff1a{count}</p>\n        <div>\n          <button onClick={add}>\u52a0\u5165\u8d2d\u7269\u8f66</button>\n          <button onClick={minus}>\u79fb\u9664\u8d2d\u7269\u8f66</button>\n        </div>\n      </Layout>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return { count: state }\n}\n\nconst mapDispatchToProps = {\n  add: () => {\n    return { type: 'ADD' }\n  },\n  minus: () => {\n    return { type: 'MINUS' }\n  }\n}\n\nexport default connect(\n mapStateToProps,\n mapDispatchToProps\n)(User)\n"})})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(p,{...n})}):p(n)}},1377:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>c});var o=t(9474);const s={},r=o.createContext(s);function a(n){const e=o.useContext(r);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),o.createElement(r.Provider,{value:e},n.children)}}}]);